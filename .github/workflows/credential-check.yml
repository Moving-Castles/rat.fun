name: Environment File Check

on: [push, pull_request]

jobs:
  check-env-files:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Get full history for better scanning

      - name: Check for .env files
        run: |
          # Check for .env files (excluding examples)
          if find . -name ".env*" -not -name ".env.example" -not -name ".env.test" | grep -q .; then
            echo "❌ Found .env files:"
            find . -name ".env*" -not -name ".env.example" -not -name ".env.test"
            echo "Please remove .env files from the repository."
            echo "Use .env.example for template files."
            exit 1
          fi

          echo "✅ No .env files found"
