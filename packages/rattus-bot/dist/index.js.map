{"version":3,"sources":["../src/index.ts","../src/bot.ts","../src/modules/mud/setup.ts","../../contracts/worlds.json","../src/modules/mud/supportedChains.ts","../src/modules/mud/networkConfig.ts","../../contracts/out/IWorld.sol/IWorld.abi.json","../../contracts/mud.config.ts","../../contracts/enums.ts","../src/modules/mud/actions/spawn.ts","../src/modules/mud/actions/createRat.ts","../src/modules/mud/actions/approveTokens.ts","../src/modules/mud/actions/getTrips.ts","../src/modules/signature/index.ts","../src/modules/server/enterTrip.ts","../src/modules/trip-selector/heuristic.ts","../src/modules/trip-selector/claude.ts","../src/modules/cms/index.ts","../src/modules/trip-selector/historical.ts","../src/modules/trip-selector/graph/types.ts","../src/modules/trip-selector/graph/statistics.ts","../src/modules/trip-selector/graph/path-reconstruction.ts","../src/modules/trip-selector/graph/graph-builder.ts","../src/modules/trip-selector/graph/index.ts","../src/modules/trip-selector/index.ts","../src/modules/utils.ts","../src/modules/logger.ts","../src/modules/history/index.ts","../src/config.ts"],"sourcesContent":["import { Command } from \"commander\"\nimport { runBot } from \"./bot\"\nimport { loadConfig } from \"./config\"\n\nconst program = new Command()\n  .name(\"rattus-bot\")\n  .description(\"Autonomous rat.fun player bot\")\n  .version(\"1.0.0\")\n  .option(\"-c, --chain <id>\", \"Chain ID (8453=Base, 84532=Base Sepolia, 31337=local)\")\n  .option(\"-s, --selector <type>\", \"Trip selector: claude, heuristic, random, historical, or graph\")\n  .option(\"-r, --auto-respawn\", \"Automatically create new rat on death\")\n  .option(\"-n, --name <name>\", \"Name for the rat\")\n  .option(\"-l, --liquidate-at <value>\", \"Liquidate rat when total value reaches this threshold\")\n  .option(\n    \"-b, --liquidate-below <value>\",\n    \"Liquidate rat when total value falls below this threshold\"\n  )\n  .action(async options => {\n    try {\n      const config = loadConfig({\n        chain: options.chain,\n        selector: options.selector,\n        autoRespawn: options.autoRespawn,\n        name: options.name,\n        liquidateAt: options.liquidateAt,\n        liquidateBelow: options.liquidateBelow\n      })\n\n      await runBot(config)\n    } catch (error) {\n      console.error(\"Fatal error:\", error instanceof Error ? error.message : String(error))\n      process.exit(1)\n    }\n  })\n\nprogram.parse()\n","import Anthropic from \"@anthropic-ai/sdk\"\nimport type { Config, Rat, TripOutcomeHistory } from \"./types\"\nimport {\n  setupMud,\n  spawn,\n  createRat,\n  approveMaxTokens,\n  getAllowance,\n  getAvailableTrips,\n  getPlayer,\n  getRat,\n  getGameConfig,\n  canRatEnterTrip,\n  getRatTotalValue,\n  getInventoryDetails,\n  type SetupResult\n} from \"./modules/mud\"\nimport { enterTrip } from \"./modules/server\"\nimport { selectTrip, updateGraphWithOutcome, markTripDepleted, getRecommendedPath, getGraph } from \"./modules/trip-selector\"\nimport { getGamePercentagesConfig } from \"./modules/mud\"\nimport { addressToId, sleep, retryUntilResult } from \"./modules/utils\"\nimport {\n  logInfo,\n  logSuccess,\n  logWarning,\n  logError,\n  logTrip,\n  logRat,\n  logDeath,\n  logStats,\n  logSessionStats,\n  logValueBar\n} from \"./modules/logger\"\nimport { loadOutcomeHistory, saveOutcomeHistory } from \"./modules/history\"\n\n// Add liquidateRat action\nasync function liquidateRat(mud: SetupResult): Promise<string> {\n  console.log(\"Liquidating rat...\")\n  const tx = await mud.worldContract.write.ratfun__liquidateRat()\n  console.log(`Liquidate transaction sent: ${tx}`)\n  await mud.waitForTransaction(tx)\n  console.log(\"Rat liquidated successfully!\")\n  return tx\n}\n\nexport async function runBot(config: Config) {\n  logInfo(\"Starting Rattus Bot...\")\n  logInfo(`Chain ID: ${config.chainId}`)\n  logInfo(`Server URL: ${config.serverUrl}`)\n  logInfo(`Trip selector: ${config.tripSelector}`)\n  logInfo(`Auto-respawn: ${config.autoRespawn}`)\n  if (config.liquidateAtValue) {\n    logInfo(`Liquidate at value: ${config.liquidateAtValue}`)\n  }\n\n  // Initialize Anthropic client if using Claude selector\n  let anthropic: Anthropic | undefined\n  if (config.tripSelector === \"claude\") {\n    anthropic = new Anthropic({ apiKey: config.anthropicApiKey })\n    logInfo(\"Claude API client initialized\")\n  }\n\n  // Setup MUD\n  logInfo(\"Setting up MUD connection...\")\n  const mud = await setupMud(config.privateKey, config.chainId, config.worldAddress)\n  logSuccess(\"MUD setup complete!\")\n\n  // Wait a moment for sync to fully complete\n  logInfo(\"Waiting for state sync...\")\n  await sleep(2000)\n\n  const walletAddress = mud.walletClient.account.address\n  const playerId = addressToId(walletAddress)\n  logInfo(`Wallet address: ${walletAddress}`)\n  logInfo(`Player ID: ${playerId}`)\n\n  // Check if player exists (retry a few times in case sync is still catching up)\n  logInfo(\"Checking player status...\")\n  let player = await retryUntilResult(() => getPlayer(mud, playerId), 5000, 500)\n\n  if (!player) {\n    logInfo(\"Player not found, spawning...\")\n    await spawn(mud, config.ratName)\n\n    // Wait for player to appear in MUD state\n    logInfo(\"Waiting for player to sync...\")\n    player = await retryUntilResult(() => getPlayer(mud, playerId), 10000, 500)\n\n    if (!player) {\n      throw new Error(\"Failed to create player - timeout waiting for sync\")\n    }\n    logSuccess(`Player spawned: ${player.name}`)\n  } else {\n    logSuccess(`Player found: ${player.name}`)\n  }\n\n  // Check token allowance\n  logInfo(\"Checking token allowance...\")\n  const gameConfig = getGameConfig(mud)\n  const allowance = await getAllowance(mud, walletAddress)\n  const requiredAllowance = BigInt(gameConfig.ratCreationCost) * BigInt(10 ** 18)\n\n  if (allowance < requiredAllowance) {\n    logWarning(\"Insufficient token allowance, approving max...\")\n    await approveMaxTokens(mud)\n    logSuccess(\"Token allowance approved!\")\n  } else {\n    logSuccess(\"Token allowance sufficient\")\n  }\n\n  // Check for current rat\n  logInfo(\"Checking rat status...\")\n  let rat: Rat | null = null\n  let ratId = player.currentRat\n\n  if (ratId) {\n    rat = getRat(mud, ratId)\n    if (rat && !rat.dead) {\n      logSuccess(`Found live rat: ${rat.name} (balance: ${rat.balance})`)\n    } else if (rat?.dead) {\n      logWarning(`Rat ${rat.name} is dead`)\n      rat = null\n      ratId = null\n    }\n  }\n\n  // Create rat if needed\n  if (!rat) {\n    logInfo(`Creating new rat: ${config.ratName}...`)\n    await createRat(mud, config.ratName)\n\n    // Wait for rat to appear\n    logInfo(\"Waiting for rat to sync...\")\n    await sleep(3000) // Give the chain time to process\n\n    // Re-fetch player to get the new currentRat\n    player = getPlayer(mud, playerId)\n    if (player?.currentRat) {\n      ratId = player.currentRat\n      rat = await retryUntilResult(() => getRat(mud, ratId!), 10000, 500)\n    }\n\n    if (!rat) {\n      throw new Error(\"Failed to create rat - timeout waiting for sync\")\n    }\n    logSuccess(`Rat created: ${rat.name} (balance: ${rat.balance})`)\n  }\n\n  // Main bot loop\n  let tripCount = 0\n  let startingBalance = rat.balance\n  let startingRatName = rat.name\n\n  // Session-wide statistics\n  let sessionTotalRats = 1\n  let sessionTotalTrips = 0\n  let sessionTotalProfitLoss = 0\n\n  // Track outcome history for learning (persists across respawns and bot restarts)\n  const outcomeHistory: TripOutcomeHistory[] = loadOutcomeHistory()\n\n  // Track current path for graph strategy (trips taken by current rat)\n  let currentPath: string[] = []\n\n  // Get game percentages config for graph strategy\n  const gamePercentagesConfig = getGamePercentagesConfig(mud)\n\n  logInfo(\"Starting main loop...\")\n  logInfo(\"==========================================\")\n\n  while (true) {\n    // Check if we should liquidate based on value threshold\n    if (config.liquidateAtValue && rat) {\n      const totalValue = getRatTotalValue(mud, rat)\n      if (totalValue >= config.liquidateAtValue) {\n        logSuccess(\n          `Rat value (${totalValue}) reached liquidation threshold (${config.liquidateAtValue})!`\n        )\n\n        // Update session stats\n        sessionTotalTrips += tripCount\n        sessionTotalProfitLoss += totalValue - startingBalance\n\n        logStats({\n          ratName: rat.name,\n          totalTrips: tripCount,\n          startingBalance,\n          finalBalance: totalValue\n        })\n        logSessionStats({\n          totalRats: sessionTotalRats,\n          totalTrips: sessionTotalTrips,\n          totalProfitLoss: sessionTotalProfitLoss\n        })\n\n        // Liquidate the rat\n        await liquidateRat(mud)\n        logSuccess(\"Rat liquidated! Creating new rat...\")\n\n        await createRat(mud, config.ratName)\n        await sleep(3000)\n\n        // Re-fetch player and rat\n        player = getPlayer(mud, playerId)\n        if (player?.currentRat) {\n          ratId = player.currentRat\n          rat = await retryUntilResult(() => getRat(mud, ratId!), 10000, 500)\n        }\n\n        if (!rat) {\n          throw new Error(\"Failed to create new rat after liquidation\")\n        }\n\n        logSuccess(`New rat created: ${rat.name} (balance: ${rat.balance})`)\n        sessionTotalRats++\n        startingBalance = rat.balance\n        startingRatName = rat.name\n        tripCount = 0\n        currentPath = [] // Reset path for new rat (graph strategy)\n        continue\n      }\n    }\n\n    // Get available trips\n    const trips = getAvailableTrips(mud)\n    logInfo(`Found ${trips.length} available trips`)\n\n    if (trips.length === 0) {\n      logWarning(\"No trips available, waiting 10 seconds...\")\n      await sleep(10000)\n      continue\n    }\n\n    // Filter trips that the rat can actually enter\n    const enterableTrips = trips.filter(trip => canRatEnterTrip(mud, rat!, trip))\n    logInfo(`${enterableTrips.length} trips are enterable with current rat value`)\n\n    if (enterableTrips.length === 0) {\n      logWarning(\"Rat value too low to enter any trips, waiting 10 seconds...\")\n      await sleep(10000)\n      continue\n    }\n\n    // Select a trip (pass history for learning)\n    const worldAddress = mud.worldContract.address\n    const ratTotalValue = getRatTotalValue(mud, rat!)\n    const inventoryItems = getInventoryDetails(mud, rat!)\n    const inventoryNames = inventoryItems.map(i => i.name)\n\n    const selection = await selectTrip({\n      config,\n      trips: enterableTrips,\n      rat: rat!,\n      ratTotalValue,\n      anthropic,\n      outcomeHistory,\n      worldAddress,\n      minRatValueToEnterPercent: gamePercentagesConfig.minRatValueToEnter,\n      currentPath,\n      inventory: inventoryNames\n    })\n    if (!selection) {\n      logError(\"Failed to select a trip\")\n      await sleep(5000)\n      continue\n    }\n\n    const { trip: selectedTrip, explanation } = selection\n\n    tripCount++\n    logTrip(tripCount, `Entering: \"${selectedTrip.prompt.slice(0, 60)}...\"`)\n    logTrip(tripCount, `Trip balance: ${selectedTrip.balance}`)\n    logInfo(`Selection reason: ${explanation}`)\n\n    // Log planned route (graph strategy only)\n    if (config.tripSelector === \"graph\") {\n      try {\n        const plannedRoute = await getRecommendedPath(\n          ratTotalValue,\n          inventoryNames,\n          worldAddress,\n          enterableTrips,\n          5 // Look ahead 5 trips\n        )\n        if (plannedRoute.length > 0) {\n          console.log(\"\")\n          logInfo(\"=== PLANNED ROUTE ===\")\n          let cumulativeEV = ratTotalValue\n          for (let i = 0; i < plannedRoute.length; i++) {\n            const step = plannedRoute[i]\n            const tripData = enterableTrips.find(t => t.id === step.tripId)\n            const prompt = tripData?.prompt?.slice(0, 40) || \"Unknown\"\n            cumulativeEV += step.expectedValue\n            const evSign = step.expectedValue >= 0 ? \"+\" : \"\"\n            logInfo(`  ${i + 1}. \"${prompt}...\" (EV: ${evSign}${step.expectedValue.toFixed(0)}, cumulative: ${cumulativeEV.toFixed(0)})`)\n          }\n          logInfo(\"=====================\")\n          console.log(\"\")\n        }\n      } catch (e) {\n        // Route planning failed, continue without it\n      }\n    }\n\n    // Track this trip in current path for graph strategy\n    currentPath.push(selectedTrip.id)\n\n    // Store rat total value before trip (balance + inventory)\n    const totalValueBefore = getRatTotalValue(mud, rat!)\n\n    // Enter the trip\n    try {\n      const outcome = await enterTrip(config.serverUrl, mud.walletClient, selectedTrip.id, rat!.id)\n\n      // Log the story\n      const logEntries: string[] = []\n      if (outcome.log && outcome.log.length > 0) {\n        console.log(\"\")\n        for (const entry of outcome.log) {\n          console.log(`  ${entry.event}`)\n          logEntries.push(entry.event)\n        }\n        console.log(\"\")\n      }\n\n      // Check if trip was depleted\n      if (outcome.tripDepleted) {\n        markTripDepleted(selectedTrip.id)\n      }\n\n      // Check if rat died\n      if (outcome.ratDead) {\n        // Record outcome for history\n        const historyEntry = {\n          tripId: selectedTrip.id,\n          tripPrompt: selectedTrip.prompt,\n          totalValueBefore,\n          totalValueAfter: 0,\n          valueChange: -totalValueBefore,\n          died: true,\n          logSummary: logEntries.slice(0, 3).join(\" | \")\n        }\n        outcomeHistory.push(historyEntry)\n        saveOutcomeHistory(outcomeHistory)\n\n        // Update graph with outcome (for graph strategy learning)\n        updateGraphWithOutcome(selectedTrip.id, {\n          _id: \"\",\n          _createdAt: new Date().toISOString(),\n          tripId: selectedTrip.id,\n          tripIndex: 0,\n          ratId: rat!.id,\n          ratName: rat!.name,\n          playerId,\n          playerName: player?.name || \"\",\n          ratValueChange: -totalValueBefore,\n          ratValue: 0,\n          oldRatValue: totalValueBefore,\n          newRatBalance: 0,\n          oldRatBalance: rat!.balance,\n          inventoryOnEntrance: inventoryItems.map(i => ({ id: \"\", name: i.name, value: i.value })),\n          itemChanges: [],\n          itemsLostOnDeath: inventoryItems.map(i => ({ id: \"\", name: i.name, value: i.value })),\n          died: true,\n          survived: false\n        })\n\n        logDeath(rat!.name, tripCount)\n\n        // Update session stats\n        sessionTotalTrips += tripCount\n        sessionTotalProfitLoss += 0 - startingBalance\n\n        logStats({\n          ratName: startingRatName,\n          totalTrips: tripCount,\n          startingBalance,\n          finalBalance: 0\n        })\n        logSessionStats({\n          totalRats: sessionTotalRats,\n          totalTrips: sessionTotalTrips,\n          totalProfitLoss: sessionTotalProfitLoss\n        })\n\n        if (config.autoRespawn) {\n          logInfo(\"Auto-respawn enabled, creating new rat...\")\n\n          await createRat(mud, config.ratName)\n          await sleep(3000)\n\n          // Re-fetch player and rat\n          player = getPlayer(mud, playerId)\n          if (player?.currentRat) {\n            ratId = player.currentRat\n            rat = await retryUntilResult(() => getRat(mud, ratId!), 10000, 500)\n          }\n\n          if (!rat) {\n            throw new Error(\"Failed to create new rat after death\")\n          }\n\n          logSuccess(`New rat created: ${rat.name} (balance: ${rat.balance})`)\n          sessionTotalRats++\n          startingBalance = rat.balance\n          startingRatName = rat.name\n          tripCount = 0 // Reset trip count for new rat\n          currentPath = [] // Reset path for new rat (graph strategy)\n        } else {\n          logInfo(\"Auto-respawn disabled, exiting...\")\n          break\n        }\n      } else {\n        // Refresh rat state\n        await sleep(2000) // Wait for chain state to update\n        rat = getRat(mud, rat!.id)\n        if (rat) {\n          const totalValueAfter = getRatTotalValue(mud, rat)\n          const valueChange = totalValueAfter - totalValueBefore\n\n          // Get updated inventory for logging and graph update\n          const updatedInventoryItems = getInventoryDetails(mud, rat)\n\n          // Record outcome for history\n          outcomeHistory.push({\n            tripId: selectedTrip.id,\n            tripPrompt: selectedTrip.prompt,\n            totalValueBefore,\n            totalValueAfter,\n            valueChange,\n            died: false,\n            logSummary: logEntries.slice(0, 3).join(\" | \")\n          })\n          saveOutcomeHistory(outcomeHistory)\n\n          // Update graph with outcome (for graph strategy learning)\n          updateGraphWithOutcome(selectedTrip.id, {\n            _id: \"\",\n            _createdAt: new Date().toISOString(),\n            tripId: selectedTrip.id,\n            tripIndex: 0,\n            ratId: rat.id,\n            ratName: rat.name,\n            playerId,\n            playerName: player?.name || \"\",\n            ratValueChange: valueChange,\n            ratValue: totalValueAfter,\n            oldRatValue: totalValueBefore,\n            newRatBalance: rat.balance,\n            oldRatBalance: totalValueBefore - (inventoryItems.reduce((sum, i) => sum + i.value, 0)),\n            inventoryOnEntrance: inventoryItems.map(i => ({ id: \"\", name: i.name, value: i.value })),\n            itemChanges: [], // Would need to compare inventories to populate this\n            itemsLostOnDeath: [],\n            died: false,\n            survived: true\n          })\n\n          const changeStr = valueChange >= 0 ? `+${valueChange}` : `${valueChange}`\n          const inventoryStr =\n            updatedInventoryItems.length > 0\n              ? `, Inventory: [${updatedInventoryItems.map(i => `${i.name}(${i.value})`).join(\", \")}]`\n              : \"\"\n          logRat(\n            rat.name,\n            `Balance: ${rat.balance}, Total Value: ${totalValueAfter} (${changeStr}), Trips: ${tripCount}${inventoryStr}`\n          )\n          logValueBar({\n            currentValue: totalValueAfter,\n            liquidateBelowValue: config.liquidateBelowValue,\n            liquidateAtValue: config.liquidateAtValue\n          })\n\n          // Re-evaluate and log updated route after trip outcome (graph strategy only)\n          if (config.tripSelector === \"graph\") {\n            try {\n              const updatedInventoryNames = updatedInventoryItems.map(i => i.name)\n              const updatedTrips = getAvailableTrips(mud).filter(trip => canRatEnterTrip(mud, rat!, trip))\n              const updatedRoute = await getRecommendedPath(\n                totalValueAfter,\n                updatedInventoryNames,\n                worldAddress,\n                updatedTrips,\n                5\n              )\n              if (updatedRoute.length > 0) {\n                console.log(\"\")\n                logInfo(\"=== UPDATED ROUTE (after outcome) ===\")\n                let cumulativeEV = totalValueAfter\n                for (let i = 0; i < updatedRoute.length; i++) {\n                  const step = updatedRoute[i]\n                  const tripData = updatedTrips.find(t => t.id === step.tripId)\n                  const prompt = tripData?.prompt?.slice(0, 40) || \"Unknown\"\n                  cumulativeEV += step.expectedValue\n                  const evSign = step.expectedValue >= 0 ? \"+\" : \"\"\n                  logInfo(`  ${i + 1}. \"${prompt}...\" (EV: ${evSign}${step.expectedValue.toFixed(0)}, cumulative: ${cumulativeEV.toFixed(0)})`)\n                }\n                logInfo(\"=====================================\")\n                console.log(\"\")\n              }\n            } catch (e) {\n              // Route re-evaluation failed, continue without it\n            }\n          }\n        }\n      }\n\n      // Small delay between trips\n      await sleep(2000)\n    } catch (error) {\n      logError(`Failed to enter trip: ${error instanceof Error ? error.message : String(error)}`)\n      await sleep(5000)\n    }\n  }\n\n  logInfo(\"Bot stopped.\")\n}\n","import {\n  createPublicClient,\n  createWalletClient,\n  http,\n  getContract,\n  type Hex,\n  type Chain,\n  type Transport,\n  type PublicClient,\n  type WalletClient,\n  type PrivateKeyAccount,\n  type GetContractReturnType,\n  type Address\n} from \"viem\"\nimport { privateKeyToAccount, nonceManager } from \"viem/accounts\"\nimport { createWorld, type World } from \"@latticexyz/recs\"\nimport { encodeEntity, syncToRecs, type SyncToRecsResult } from \"@latticexyz/store-sync/recs\"\nimport { transportObserver } from \"@latticexyz/common\"\nimport { transactionQueue } from \"@latticexyz/common/actions\"\n\nimport { getNetworkConfig } from \"./networkConfig\"\nimport IWorldAbi from \"../../../../contracts/out/IWorld.sol/IWorld.abi.json\" with { type: \"json\" }\nimport mudConfig from \"../../../../contracts/mud.config\"\n\ntype recsSyncResult = SyncToRecsResult<typeof mudConfig, {}>\n\nexport interface SetupResult {\n  world: World\n  components: recsSyncResult[\"components\"]\n  playerEntity: ReturnType<typeof encodeEntity>\n  publicClient: PublicClient<Transport, Chain>\n  walletClient: WalletClient<Transport, Chain, PrivateKeyAccount>\n  waitForTransaction: recsSyncResult[\"waitForTransaction\"]\n  worldContract: GetContractReturnType<\n    typeof IWorldAbi,\n    {\n      public: PublicClient<Transport, Chain>\n      wallet: WalletClient<Transport, Chain, PrivateKeyAccount>\n    },\n    Address\n  >\n}\n\nexport async function setupMud(\n  privateKey: Hex,\n  chainId: number,\n  worldAddressOverride?: string\n): Promise<SetupResult> {\n  const networkConfig = await getNetworkConfig(chainId, worldAddressOverride)\n  const world = createWorld()\n\n  console.log(`Setting up MUD for chain ${chainId}...`)\n  console.log(`World address: ${networkConfig.worldAddress}`)\n  console.log(`Indexer URL: ${networkConfig.indexerUrl}`)\n\n  const clientOptions = {\n    chain: networkConfig.chain,\n    transport: transportObserver(http(networkConfig.chain.rpcUrls.default.http[0])),\n    pollingInterval: 1000\n  } as const\n\n  const publicClient = createPublicClient(clientOptions)\n\n  const account = privateKeyToAccount(privateKey, { nonceManager })\n  console.log(`Bot wallet address: ${account.address}`)\n\n  const walletClient = createWalletClient({\n    ...clientOptions,\n    account\n  }).extend(transactionQueue())\n\n  const worldContract = getContract({\n    address: networkConfig.worldAddress as Hex,\n    abi: IWorldAbi,\n    client: { public: publicClient, wallet: walletClient }\n  })\n\n  console.log(\"Syncing MUD state from indexer...\")\n  const { components, waitForTransaction, storedBlockLogs$ } = await syncToRecs({\n    world,\n    config: mudConfig,\n    address: networkConfig.worldAddress as Hex,\n    publicClient,\n    startBlock: BigInt(networkConfig.initialBlockNumber),\n    indexerUrl: networkConfig.indexerUrl\n  })\n\n  // Wait for initial sync to complete (wait for first block with logs)\n  console.log(\"Waiting for initial state sync...\")\n  await new Promise<void>((resolve, reject) => {\n    const subscription = storedBlockLogs$.subscribe({\n      next: (block: { blockNumber: bigint }) => {\n        if (block.blockNumber > 0n) {\n          subscription.unsubscribe()\n          resolve()\n        }\n      },\n      error: err => {\n        subscription.unsubscribe()\n        reject(err)\n      }\n    })\n  })\n  console.log(\"MUD sync complete!\")\n\n  return {\n    world,\n    components,\n    playerEntity: encodeEntity({ address: \"address\" }, { address: walletClient.account.address }),\n    publicClient,\n    walletClient,\n    waitForTransaction,\n    worldContract\n  }\n}\n","{\n  \"690\": {\n    \"address\": \"0x4ab7e8b94347cb0236e3de126db9c50599f7db2d\",\n    \"blockNumber\": 1193554\n  },\n  \"4242\": {\n    \"address\": \"0x27bae7cea782a5232f8aab546db2639d05d3a40c\",\n    \"blockNumber\": 43079054\n  },\n  \"8453\": {\n    \"address\": \"0x28d10E6aAb1a749Be792b4D8aa0519c70E83386a\",\n    \"blockNumber\": 36961789\n  },\n  \"17001\": {\n    \"address\": \"0xe833b782f63f7f0cb754b3259780a2b0a291dd80\",\n    \"blockNumber\": 3017754\n  },\n  \"17069\": {\n    \"address\": \"0x6f9eCC22096A5A34c58FEA8FCdaF4aBE914475Cd\",\n    \"blockNumber\": 13567658\n  },\n  \"31337\": {\n    \"address\": \"0x6439113f0e1f64018c3167DA2aC21e2689818086\"\n  },\n  \"84532\": {\n    \"address\": \"0xb559D9fb876F6fC3AC05B21004B33760B3582042\",\n    \"blockNumber\": 35154850\n  },\n  \"695569\": {\n    \"address\": \"0x78a2B029a5B5600d87b4951D5108E02F87D12806\",\n    \"blockNumber\": 4446914\n  }\n}\n","import { base as baseConfig, baseSepolia as baseSepoliaConfig } from \"viem/chains\"\nimport { MUDChain, mudFoundry } from \"@latticexyz/common/chains\"\n\nconst RPC_HTTP_URL = process.env.RPC_HTTP_URL\n\nexport const extendedBase = {\n  ...baseConfig,\n  rpcUrls: {\n    default: {\n      http: RPC_HTTP_URL\n        ? [RPC_HTTP_URL, ...baseConfig.rpcUrls.default.http]\n        : baseConfig.rpcUrls.default.http,\n      webSocket: undefined\n    }\n  },\n  indexerUrl: \"https://base.rat-fun-indexer.com\"\n} as const satisfies MUDChain\n\nexport const extendedBaseSepolia = {\n  ...baseSepoliaConfig,\n  rpcUrls: {\n    default: {\n      http: RPC_HTTP_URL\n        ? [RPC_HTTP_URL, ...baseSepoliaConfig.rpcUrls.default.http]\n        : baseSepoliaConfig.rpcUrls.default.http,\n      webSocket: undefined\n    }\n  },\n  indexerUrl: \"https://base-sepolia.rat-fun-indexer.com\"\n} as const satisfies MUDChain\n\nexport const supportedChains: MUDChain[] = [mudFoundry, extendedBase, extendedBaseSepolia]\n","import worlds from \"../../../../contracts/worlds.json\" with { type: \"json\" }\nimport { supportedChains } from \"./supportedChains\"\n\nexport async function getNetworkConfig(chainId: number, worldAddressOverride?: string) {\n  const chainIndex = supportedChains.findIndex(c => c.id === chainId)\n  const chain = supportedChains[chainIndex]\n  if (!chain) {\n    throw new Error(\n      `Chain ${chainId} not supported. Supported chains: ${supportedChains.map(c => c.id).join(\", \")}`\n    )\n  }\n\n  const world = worlds[chain.id.toString() as keyof typeof worlds]\n  const worldAddress = worldAddressOverride || world?.address\n  if (!worldAddress) {\n    throw new Error(`World address not found for chain ${chainId}. Set WORLD_ADDRESS env var.`)\n  }\n\n  const initialBlockNumber = (world as { blockNumber?: number })?.blockNumber ?? 0\n\n  return {\n    chainId,\n    chain,\n    worldAddress,\n    initialBlockNumber,\n    indexerUrl: chain.indexerUrl\n  }\n}\n","[\n  {\n    \"type\": \"function\",\n    \"name\": \"batchCall\",\n    \"inputs\": [\n      {\n        \"name\": \"systemCalls\",\n        \"type\": \"tuple[]\",\n        \"internalType\": \"struct SystemCallData[]\",\n        \"components\": [\n          {\n            \"name\": \"systemId\",\n            \"type\": \"bytes32\",\n            \"internalType\": \"ResourceId\"\n          },\n          {\n            \"name\": \"callData\",\n            \"type\": \"bytes\",\n            \"internalType\": \"bytes\"\n          }\n        ]\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"returnDatas\",\n        \"type\": \"bytes[]\",\n        \"internalType\": \"bytes[]\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"batchCallFrom\",\n    \"inputs\": [\n      {\n        \"name\": \"systemCalls\",\n        \"type\": \"tuple[]\",\n        \"internalType\": \"struct SystemCallFromData[]\",\n        \"components\": [\n          {\n            \"name\": \"from\",\n            \"type\": \"address\",\n            \"internalType\": \"address\"\n          },\n          {\n            \"name\": \"systemId\",\n            \"type\": \"bytes32\",\n            \"internalType\": \"ResourceId\"\n          },\n          {\n            \"name\": \"callData\",\n            \"type\": \"bytes\",\n            \"internalType\": \"bytes\"\n          }\n        ]\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"returnDatas\",\n        \"type\": \"bytes[]\",\n        \"internalType\": \"bytes[]\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"call\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"callData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"payable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"callFrom\",\n    \"inputs\": [\n      {\n        \"name\": \"delegator\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"callData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"payable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"creator\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"deleteRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getDynamicFieldLength\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getDynamicFieldSlice\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"end\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getFieldLayout\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getFieldLength\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getFieldLength\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getKeySchema\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"keySchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getStaticField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"getValueSchema\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"valueSchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"grantAccess\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"grantee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"initialize\",\n    \"inputs\": [\n      {\n        \"name\": \"initModule\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IModule\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"installModule\",\n    \"inputs\": [\n      {\n        \"name\": \"module\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IModule\"\n      },\n      {\n        \"name\": \"encodedArgs\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"installRootModule\",\n    \"inputs\": [\n      {\n        \"name\": \"module\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IModule\"\n      },\n      {\n        \"name\": \"encodedArgs\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"popFromDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"byteLengthToPop\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"pushToDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"dataToPush\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__addTripBalance\",\n    \"inputs\": [\n      {\n        \"name\": \"_tripId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      },\n      {\n        \"name\": \"_amount\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__applyOutcome\",\n    \"inputs\": [\n      {\n        \"name\": \"_ratId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      },\n      {\n        \"name\": \"_tripId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      },\n      {\n        \"name\": \"_balanceTransferToOrFromRat\",\n        \"type\": \"int256\",\n        \"internalType\": \"int256\"\n      },\n      {\n        \"name\": \"_itemsToRemoveFromRat\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"_itemsToAddToRat\",\n        \"type\": \"tuple[]\",\n        \"internalType\": \"struct Item[]\",\n        \"components\": [\n          {\n            \"name\": \"name\",\n            \"type\": \"string\",\n            \"internalType\": \"string\"\n          },\n          {\n            \"name\": \"value\",\n            \"type\": \"uint256\",\n            \"internalType\": \"uint256\"\n          }\n        ]\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__balanceOf\",\n    \"inputs\": [\n      {\n        \"name\": \"playerId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__closeTrip\",\n    \"inputs\": [\n      {\n        \"name\": \"_tripId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__createRat\",\n    \"inputs\": [\n      {\n        \"name\": \"_name\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"ratId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__createTrip\",\n    \"inputs\": [\n      {\n        \"name\": \"_playerId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      },\n      {\n        \"name\": \"_tripId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      },\n      {\n        \"name\": \"_tripCreationCost\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"_isChallengeTrip\",\n        \"type\": \"bool\",\n        \"internalType\": \"bool\"\n      },\n      {\n        \"name\": \"_fixedMinValueToEnter\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"_overrideMaxValuePerWinPercentage\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"_prompt\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"newTripId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__giveCallerTokens\",\n    \"inputs\": [],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__giveMasterKey\",\n    \"inputs\": [\n      {\n        \"name\": \"playerId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__liquidateRat\",\n    \"inputs\": [],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__removeWorldEvent\",\n    \"inputs\": [],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__setCooldownCloseTrip\",\n    \"inputs\": [\n      {\n        \"name\": \"_cooldownCloseTrip\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__setMaxValuePerWin\",\n    \"inputs\": [\n      {\n        \"name\": \"_maxValuePerWin\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__setMinRatValueToEnter\",\n    \"inputs\": [\n      {\n        \"name\": \"_minRatValueToEnter\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__setRatsKilledForAdminAccess\",\n    \"inputs\": [\n      {\n        \"name\": \"_ratsKilledForAdminAccess\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__setTaxationCloseTrip\",\n    \"inputs\": [\n      {\n        \"name\": \"_taxationCloseTrip\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__setTaxationLiquidateRat\",\n    \"inputs\": [\n      {\n        \"name\": \"_taxationLiquidateRat\",\n        \"type\": \"uint32\",\n        \"internalType\": \"uint32\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__setWorldEvent\",\n    \"inputs\": [\n      {\n        \"name\": \"cmsId\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      },\n      {\n        \"name\": \"title\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      },\n      {\n        \"name\": \"prompt\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      },\n      {\n        \"name\": \"durationInBlocks\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__spawn\",\n    \"inputs\": [\n      {\n        \"name\": \"_name\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"playerId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"ratfun__unlockAdmin\",\n    \"inputs\": [],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"delegatee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"delegationControlId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"initCallData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerFunctionSelector\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"systemFunctionSignature\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"worldFunctionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerNamespace\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerNamespaceDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"delegationControlId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"initCallData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerRootFunctionSelector\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"worldFunctionSignature\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      },\n      {\n        \"name\": \"systemFunctionSignature\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ],\n    \"outputs\": [\n      {\n        \"name\": \"worldFunctionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerStoreHook\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IStoreHook\"\n      },\n      {\n        \"name\": \"enabledHooksBitmap\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerSystem\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"system\",\n        \"type\": \"address\",\n        \"internalType\": \"contract System\"\n      },\n      {\n        \"name\": \"publicAccess\",\n        \"type\": \"bool\",\n        \"internalType\": \"bool\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerSystemHook\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract ISystemHook\"\n      },\n      {\n        \"name\": \"enabledHooksBitmap\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"registerTable\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      },\n      {\n        \"name\": \"keySchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      },\n      {\n        \"name\": \"valueSchema\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"Schema\"\n      },\n      {\n        \"name\": \"keyNames\",\n        \"type\": \"string[]\",\n        \"internalType\": \"string[]\"\n      },\n      {\n        \"name\": \"fieldNames\",\n        \"type\": \"string[]\",\n        \"internalType\": \"string[]\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"renounceOwnership\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"revokeAccess\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"grantee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setDynamicField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"setStaticField\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"fieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"fieldLayout\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"FieldLayout\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"spliceDynamicData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"startWithinField\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"deleteCount\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"spliceStaticData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint48\",\n        \"internalType\": \"uint48\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"storeVersion\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"name\": \"version\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"transferBalanceToAddress\",\n    \"inputs\": [\n      {\n        \"name\": \"fromNamespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"toAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"amount\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"transferBalanceToNamespace\",\n    \"inputs\": [\n      {\n        \"name\": \"fromNamespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"toNamespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"amount\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"transferOwnership\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"newOwner\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"delegatee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterNamespaceDelegation\",\n    \"inputs\": [\n      {\n        \"name\": \"namespaceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterStoreHook\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract IStoreHook\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"unregisterSystemHook\",\n    \"inputs\": [\n      {\n        \"name\": \"systemId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"hookAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"contract ISystemHook\"\n      }\n    ],\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\"\n  },\n  {\n    \"type\": \"function\",\n    \"name\": \"worldVersion\",\n    \"inputs\": [],\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"HelloStore\",\n    \"inputs\": [\n      {\n        \"name\": \"storeVersion\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"HelloWorld\",\n    \"inputs\": [\n      {\n        \"name\": \"worldVersion\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"bytes32\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_DeleteRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_SetRecord\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"staticData\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"indexed\": false,\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"dynamicData\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_SpliceDynamicData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"dynamicFieldIndex\",\n        \"type\": \"uint8\",\n        \"indexed\": false,\n        \"internalType\": \"uint8\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint48\",\n        \"indexed\": false,\n        \"internalType\": \"uint48\"\n      },\n      {\n        \"name\": \"deleteCount\",\n        \"type\": \"uint40\",\n        \"indexed\": false,\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"encodedLengths\",\n        \"type\": \"bytes32\",\n        \"indexed\": false,\n        \"internalType\": \"EncodedLengths\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"event\",\n    \"name\": \"Store_SpliceStaticData\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"indexed\": true,\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"keyTuple\",\n        \"type\": \"bytes32[]\",\n        \"indexed\": false,\n        \"internalType\": \"bytes32[]\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint48\",\n        \"indexed\": false,\n        \"internalType\": \"uint48\"\n      },\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"indexed\": false,\n        \"internalType\": \"bytes\"\n      }\n    ],\n    \"anonymous\": false\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"EncodedLengths_InvalidLength\",\n    \"inputs\": [\n      {\n        \"name\": \"length\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_Empty\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_InvalidStaticDataLength\",\n    \"inputs\": [\n      {\n        \"name\": \"staticDataLength\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"computedStaticDataLength\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_StaticLengthDoesNotFitInAWord\",\n    \"inputs\": [\n      {\n        \"name\": \"index\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_StaticLengthIsNotZero\",\n    \"inputs\": [\n      {\n        \"name\": \"index\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_StaticLengthIsZero\",\n    \"inputs\": [\n      {\n        \"name\": \"index\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_TooManyDynamicFields\",\n    \"inputs\": [\n      {\n        \"name\": \"numFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"maxFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"FieldLayout_TooManyFields\",\n    \"inputs\": [\n      {\n        \"name\": \"numFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"maxFields\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_AlreadyInstalled\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_MissingDependency\",\n    \"inputs\": [\n      {\n        \"name\": \"dependency\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_NonRootInstallNotSupported\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Module_RootInstallNotSupported\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Schema_InvalidLength\",\n    \"inputs\": [\n      {\n        \"name\": \"length\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Schema_StaticTypeAfterDynamicType\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Slice_OutOfBounds\",\n    \"inputs\": [\n      {\n        \"name\": \"data\",\n        \"type\": \"bytes\",\n        \"internalType\": \"bytes\"\n      },\n      {\n        \"name\": \"start\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"end\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_IndexOutOfBounds\",\n    \"inputs\": [\n      {\n        \"name\": \"length\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"accessedIndex\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidBounds\",\n    \"inputs\": [\n      {\n        \"name\": \"start\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"end\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidFieldNamesLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidKeyNamesLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidResourceType\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"bytes2\",\n        \"internalType\": \"bytes2\"\n      },\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidSplice\",\n    \"inputs\": [\n      {\n        \"name\": \"startWithinField\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"deleteCount\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      },\n      {\n        \"name\": \"fieldLength\",\n        \"type\": \"uint40\",\n        \"internalType\": \"uint40\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidStaticDataLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidValueSchemaDynamicLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidValueSchemaLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_InvalidValueSchemaStaticLength\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"received\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_TableAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"tableIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"Store_TableNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"tableId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"tableIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_AccessDenied\",\n    \"inputs\": [\n      {\n        \"name\": \"resource\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      },\n      {\n        \"name\": \"caller\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_AlreadyInitialized\",\n    \"inputs\": []\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_CallbackNotAllowed\",\n    \"inputs\": [\n      {\n        \"name\": \"functionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_DelegationNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"delegator\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"delegatee\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_FunctionSelectorAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"functionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_FunctionSelectorNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"functionSelector\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InsufficientBalance\",\n    \"inputs\": [\n      {\n        \"name\": \"balance\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      },\n      {\n        \"name\": \"amount\",\n        \"type\": \"uint256\",\n        \"internalType\": \"uint256\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InterfaceNotSupported\",\n    \"inputs\": [\n      {\n        \"name\": \"contractAddress\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      },\n      {\n        \"name\": \"interfaceId\",\n        \"type\": \"bytes4\",\n        \"internalType\": \"bytes4\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InvalidNamespace\",\n    \"inputs\": [\n      {\n        \"name\": \"namespace\",\n        \"type\": \"bytes14\",\n        \"internalType\": \"bytes14\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InvalidResourceId\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_InvalidResourceType\",\n    \"inputs\": [\n      {\n        \"name\": \"expected\",\n        \"type\": \"bytes2\",\n        \"internalType\": \"bytes2\"\n      },\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_ResourceAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_ResourceNotFound\",\n    \"inputs\": [\n      {\n        \"name\": \"resourceId\",\n        \"type\": \"bytes32\",\n        \"internalType\": \"ResourceId\"\n      },\n      {\n        \"name\": \"resourceIdString\",\n        \"type\": \"string\",\n        \"internalType\": \"string\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_SystemAlreadyExists\",\n    \"inputs\": [\n      {\n        \"name\": \"system\",\n        \"type\": \"address\",\n        \"internalType\": \"address\"\n      }\n    ]\n  },\n  {\n    \"type\": \"error\",\n    \"name\": \"World_UnlimitedDelegationNotAllowed\",\n    \"inputs\": []\n  }\n]","import { defineWorld } from \"@latticexyz/world\"\nimport { ENTITY_TYPE_ARRAY } from \"./enums\"\n\nexport default defineWorld({\n  namespace: \"ratfun\",\n  enums: {\n    ENTITY_TYPE: ENTITY_TYPE_ARRAY\n  },\n  codegen: {\n    generateSystemLibraries: true\n  },\n  deploy: {\n    upgradeableWorldImplementation: true\n  },\n  tables: {\n    GameConfig: {\n      key: [],\n      schema: {\n        adminAddress: \"address\",\n        adminId: \"bytes32\",\n        ratCreationCost: \"uint256\",\n        maxInventorySize: \"uint32\",\n        maxTripPromptLength: \"uint32\",\n        cooldownCloseTrip: \"uint32\",\n        ratsKilledForAdminAccess: \"uint32\"\n      },\n      codegen: {\n        dataStruct: true\n      }\n    },\n    GamePercentagesConfig: {\n      key: [],\n      schema: {\n        maxValuePerWin: \"uint32\", // Limits how much a rat can extract from trip in one run\n        minRatValueToEnter: \"uint32\", // Minimum total value of rat to enter trip.\n        taxationLiquidateRat: \"uint32\",\n        taxationCloseTrip: \"uint32\"\n      }\n    },\n    WorldStats: {\n      key: [],\n      schema: {\n        globalTripIndex: \"uint256\",\n        globalRatIndex: \"uint256\",\n        globalRatKillCount: \"uint256\",\n        lastKilledRatBlock: \"uint256\"\n      }\n    },\n    ExternalAddressesConfig: {\n      key: [],\n      schema: {\n        erc20Address: \"address\",\n        gamePoolAddress: \"address\",\n        mainSaleAddress: \"address\",\n        serviceAddress: \"address\",\n        feeAddress: \"address\"\n      },\n      codegen: {\n        dataStruct: true\n      }\n    },\n    WorldEvent: {\n      key: [],\n      schema: {\n        creationBlock: \"uint256\",\n        expirationBlock: \"uint256\",\n        cmsId: \"string\",\n        title: \"string\",\n        prompt: \"string\"\n      }\n    },\n    // = = = = = = = = = =\n    Name: \"string\", // Set on player, rat and trip\n    EntityType: \"ENTITY_TYPE\",\n    CreationBlock: \"uint256\", // Set on player, rat and trip\n    LastVisitBlock: \"uint256\", // Set on trip\n    // = = = = = = = = = =\n    Balance: \"uint256\", // Amount of credits. Set on player, rat and trip.\n    // = = = = = = = = = =\n    Dead: \"bool\", // Set on rat\n    Liquidated: \"bool\", // Set on rat and trip when it is liquidated by owner\n    LiquidationValue: \"uint256\", // Set on rat and trip when it is liquidated, gross value (before taxation)\n    LiquidationTaxPercentage: \"uint256\", // Set on rat and trip when it is liquidated\n    LiquidationBlock: \"uint256\", // Set on rat and trip when it is liquidated\n    // = = = = = = = = = =\n    Inventory: \"bytes32[]\", // Items carried by player and rat\n    // = = = = = = = = = =\n    MasterKey: \"bool\", // Set on player. Gives access to in-game admin area.\n    Index: \"uint256\", // Set on rat and trip\n    Value: \"uint256\", // Set on items\n    CurrentRat: \"bytes32\", // Set on player\n    PastRats: \"bytes32[]\", // Set on player. List of rats the player has owned.\n    Owner: \"bytes32\", // Set on trip and rat\n    VisitCount: \"uint256\", // Set on trip\n    KillCount: \"uint256\", // Set on trip\n    TripCount: \"uint256\", // Set on rat\n    // = = = = = = = = = =\n    Prompt: \"string\",\n    // = = = = = = = = = =\n    TripCreationCost: \"uint256\", // Initial balance of trip.\n    // = = = = = = = = = =\n    // Challenge trip extensions\n    // = = = = = = = = = =\n    ChallengeTrip: \"bool\", // Mark trip as a challenge trip\n    FixedMinValueToEnter: \"uint256\", // Fixed minimum value to enter the trip\n    OverrideMaxValuePerWinPercentage: \"uint256\", // Override maximum value per win percentage\n    ChallengeWinner: \"bytes32\" // Winner of the challenge trip\n  },\n  systems: {\n    // DevSystem is conditionally deployed for local/test chains in PostDeploy\n    DevSystem: {\n      deploy: {\n        disabled: true\n      }\n    }\n  },\n  modules: [\n    {\n      artifactPath: \"@latticexyz/world-modules/out/UniqueEntityModule.sol/UniqueEntityModule.json\",\n      root: true,\n      args: []\n    }\n  ]\n})\n","enum ENTITY_TYPE {\n  NONE,\n  PLAYER,\n  RAT,\n  TRIP,\n  ITEM\n}\n\n// TODO remove placeholder workaround if you find a better solution (eg make string[] work)\nfunction getEnumKeys(enumObj: Record<string, number | string>): [\"PH\"] {\n  // Filter the keys to remove the numeric ones, leaving only the string keys\n  return Object.values(enumObj).filter(key => isNaN(Number(key))) as [\"PH\"]\n}\n\nexport function getEnumValues<O extends Record<string, number | string>>(enumObj: O): O[keyof O][] {\n  return Object.values(enumObj).filter(key => !isNaN(Number(key))) as never\n}\n\nconst ENTITY_TYPE_ARRAY = getEnumKeys(ENTITY_TYPE)\n\nexport { ENTITY_TYPE, ENTITY_TYPE_ARRAY }\n","import type { SetupResult } from \"../setup\"\n\nexport async function spawn(mud: SetupResult, name: string): Promise<string> {\n  console.log(`Spawning player with name: ${name}...`)\n\n  const tx = await mud.worldContract.write.ratfun__spawn([name])\n  console.log(`Spawn transaction sent: ${tx}`)\n\n  await mud.waitForTransaction(tx)\n  console.log(`Player spawned successfully!`)\n\n  return tx\n}\n","import type { SetupResult } from \"../setup\"\n\nexport async function createRat(mud: SetupResult, name: string): Promise<string> {\n  console.log(`Creating rat with name: ${name}...`)\n\n  const tx = await mud.worldContract.write.ratfun__createRat([name])\n  console.log(`CreateRat transaction sent: ${tx}`)\n\n  await mud.waitForTransaction(tx)\n  console.log(`Rat created successfully!`)\n\n  return tx\n}\n","import { maxUint256, erc20Abi, type Hex } from \"viem\"\nimport { getComponentValue } from \"@latticexyz/recs\"\nimport { singletonEntity } from \"@latticexyz/store-sync/recs\"\nimport type { SetupResult } from \"../setup\"\n\nexport async function approveMaxTokens(mud: SetupResult): Promise<string> {\n  const externalAddresses = getComponentValue(\n    mud.components.ExternalAddressesConfig,\n    singletonEntity\n  )\n  if (!externalAddresses) {\n    throw new Error(\"ExternalAddressesConfig not found in MUD state\")\n  }\n\n  const erc20Address = externalAddresses.erc20Address as Hex\n  const gamePoolAddress = externalAddresses.gamePoolAddress as Hex\n\n  console.log(`Approving max tokens for game pool...`)\n  console.log(`  ERC20 address: ${erc20Address}`)\n  console.log(`  Game pool address: ${gamePoolAddress}`)\n\n  const tx = await mud.walletClient.writeContract({\n    address: erc20Address,\n    abi: erc20Abi,\n    functionName: \"approve\",\n    args: [gamePoolAddress, maxUint256]\n  })\n\n  console.log(`Approve transaction sent: ${tx}`)\n  await mud.publicClient.waitForTransactionReceipt({ hash: tx })\n  console.log(`Tokens approved successfully!`)\n\n  return tx\n}\n\nexport async function getAllowance(mud: SetupResult, ownerAddress: Hex): Promise<bigint> {\n  const externalAddresses = getComponentValue(\n    mud.components.ExternalAddressesConfig,\n    singletonEntity\n  )\n  if (!externalAddresses) {\n    throw new Error(\"ExternalAddressesConfig not found in MUD state\")\n  }\n\n  const erc20Address = externalAddresses.erc20Address as Hex\n  const gamePoolAddress = externalAddresses.gamePoolAddress as Hex\n\n  const allowance = await mud.publicClient.readContract({\n    address: erc20Address,\n    abi: erc20Abi,\n    functionName: \"allowance\",\n    args: [ownerAddress, gamePoolAddress]\n  })\n\n  return allowance\n}\n\nexport async function getTokenBalance(mud: SetupResult, ownerAddress: Hex): Promise<bigint> {\n  const externalAddresses = getComponentValue(\n    mud.components.ExternalAddressesConfig,\n    singletonEntity\n  )\n  if (!externalAddresses) {\n    throw new Error(\"ExternalAddressesConfig not found in MUD state\")\n  }\n\n  const erc20Address = externalAddresses.erc20Address as Hex\n\n  const balance = await mud.publicClient.readContract({\n    address: erc20Address,\n    abi: erc20Abi,\n    functionName: \"balanceOf\",\n    args: [ownerAddress]\n  })\n\n  return balance\n}\n","import { getComponentValue, type Entity } from \"@latticexyz/recs\"\nimport type { SetupResult } from \"../setup\"\nimport type { Trip, Rat, Player, GameConfig, GamePercentagesConfig } from \"../../../types\"\nimport { singletonEntity } from \"@latticexyz/store-sync/recs\"\nimport { ENTITY_TYPE } from \"contracts/enums\"\n\n/**\n * Get all available trips (balance > 0) from MUD state\n */\nexport function getAvailableTrips(mud: SetupResult): Trip[] {\n  const { EntityType, Balance, Prompt, TripCreationCost, Owner, VisitCount, KillCount } =\n    mud.components\n\n  const trips: Trip[] = []\n\n  // Iterate over all entities with EntityType component\n  EntityType.values.value.forEach((entityType, entityKey) => {\n    const entityId = entityKey.description as string\n\n    if (entityType === ENTITY_TYPE.TRIP) {\n      const balance = Number(getComponentValue(Balance, entityId as Entity)?.value ?? 0)\n\n      // Only include trips with balance > 0\n      if (balance > 0) {\n        const prompt = (getComponentValue(Prompt, entityId as Entity)?.value ?? \"\") as string\n        const tripCreationCost = Number(\n          getComponentValue(TripCreationCost, entityId as Entity)?.value ?? 0\n        )\n        const owner = (getComponentValue(Owner, entityId as Entity)?.value ?? \"\") as string\n        const visitCount = Number(getComponentValue(VisitCount, entityId as Entity)?.value ?? 0)\n        const killCount = Number(getComponentValue(KillCount, entityId as Entity)?.value ?? 0)\n\n        trips.push({\n          id: entityId,\n          prompt,\n          balance,\n          tripCreationCost,\n          owner,\n          visitCount,\n          killCount\n        })\n      }\n    }\n  })\n\n  return trips\n}\n\n/**\n * Get player data from MUD state\n */\nexport function getPlayer(mud: SetupResult, playerId: string): Player | null {\n  const { Name, Balance, CurrentRat, EntityType } = mud.components\n\n  // Check if entity exists by looking for EntityType (more reliable than Name)\n  const entityTypeValue = getComponentValue(EntityType, playerId as Entity)\n  const entityType = entityTypeValue?.value\n\n  if (entityType !== ENTITY_TYPE.PLAYER) return null\n\n  const name = (getComponentValue(Name, playerId as Entity)?.value ?? \"Unknown\") as string\n  const balance = Number(getComponentValue(Balance, playerId as Entity)?.value ?? 0)\n  const currentRat = (getComponentValue(CurrentRat, playerId as Entity)?.value ?? null) as\n    | string\n    | null\n\n  return {\n    id: playerId,\n    name,\n    balance,\n    currentRat\n  }\n}\n\n/**\n * Get rat data from MUD state\n */\nexport function getRat(mud: SetupResult, ratId: string): Rat | null {\n  const { Name, Balance, Dead, Owner, TripCount, Inventory } = mud.components\n\n  const name = getComponentValue(Name, ratId as Entity)?.value as string | undefined\n  if (!name) return null\n\n  const balance = Number(getComponentValue(Balance, ratId as Entity)?.value ?? 0)\n  const dead = Boolean(getComponentValue(Dead, ratId as Entity)?.value ?? false)\n  const owner = (getComponentValue(Owner, ratId as Entity)?.value ?? \"\") as string\n  const tripCount = Number(getComponentValue(TripCount, ratId as Entity)?.value ?? 0)\n  const inventory = (getComponentValue(Inventory, ratId as Entity)?.value ?? []) as string[]\n\n  return {\n    id: ratId,\n    name,\n    balance,\n    dead,\n    owner,\n    tripCount,\n    inventory\n  }\n}\n\n/**\n * Get game config from MUD state\n */\nexport function getGameConfig(mud: SetupResult): GameConfig {\n  const gameConfig = getComponentValue(mud.components.GameConfig, singletonEntity)\n  if (!gameConfig) {\n    throw new Error(\"GameConfig not found in MUD state\")\n  }\n\n  return {\n    ratCreationCost: Number(gameConfig.ratCreationCost),\n    adminId: gameConfig.adminId as string\n  }\n}\n\n/**\n * Get game percentages config from MUD state\n */\nexport function getGamePercentagesConfig(mud: SetupResult): GamePercentagesConfig {\n  const config = getComponentValue(mud.components.GamePercentagesConfig, singletonEntity)\n  if (!config) {\n    throw new Error(\"GamePercentagesConfig not found in MUD state\")\n  }\n\n  return {\n    maxValuePerWin: Number(config.maxValuePerWin),\n    minRatValueToEnter: Number(config.minRatValueToEnter)\n  }\n}\n\n/**\n * Calculate total rat value (balance + inventory)\n */\nexport function getRatTotalValue(mud: SetupResult, rat: Rat): number {\n  const { Value } = mud.components\n  let totalValue = rat.balance\n\n  for (const itemId of rat.inventory) {\n    if (itemId) {\n      const itemValue = Number(getComponentValue(Value, itemId as Entity)?.value ?? 0)\n      totalValue += itemValue\n    }\n  }\n\n  return totalValue\n}\n\n/**\n * Get inventory items with their names and values\n */\nexport function getInventoryDetails(mud: SetupResult, rat: Rat): { name: string; value: number }[] {\n  const { Name, Value } = mud.components\n  const items: { name: string; value: number }[] = []\n\n  for (const itemId of rat.inventory) {\n    if (itemId) {\n      const name = (getComponentValue(Name, itemId as Entity)?.value ?? \"Unknown\") as string\n      const value = Number(getComponentValue(Value, itemId as Entity)?.value ?? 0)\n      items.push({ name, value })\n    }\n  }\n\n  return items\n}\n\n/**\n * Check if rat can enter a trip based on minimum value requirement\n */\nexport function canRatEnterTrip(mud: SetupResult, rat: Rat, trip: Trip): boolean {\n  const config = getGamePercentagesConfig(mud)\n  const ratValue = getRatTotalValue(mud, rat)\n  const minRequired = Math.floor((trip.tripCreationCost * config.minRatValueToEnter) / 100)\n  return ratValue >= minRequired\n}\n","import type { Hex, WalletClient, Chain, Transport, PrivateKeyAccount } from \"viem\"\nimport type { SignedRequest, SignedRequestInfo } from \"../../types\"\n\n/**\n * Sign a request for the server API\n * Adapted from packages/client/src/lib/modules/signature/index.ts\n */\nexport async function signRequest<T>(\n  data: T,\n  walletClient: WalletClient<Transport, Chain, PrivateKeyAccount>\n): Promise<SignedRequest<T>> {\n  const info: SignedRequestInfo = {\n    timestamp: Date.now(),\n    nonce: Math.floor(Math.random() * 1e12),\n    calledFrom: null // Bot uses direct wallet, not delegation\n  }\n\n  const message = JSON.stringify({ data, info })\n\n  const signature = await walletClient.signMessage({\n    message\n  })\n\n  return {\n    data,\n    info,\n    signature: signature as Hex\n  }\n}\n","import type { WalletClient, Chain, Transport, PrivateKeyAccount } from \"viem\"\nimport type { EnterTripRequestBody, EnterTripReturnValue } from \"../../types\"\nimport { signRequest } from \"../signature\"\n\n/**\n * Call the server's /trip/enter endpoint\n */\nexport async function enterTrip(\n  serverUrl: string,\n  walletClient: WalletClient<Transport, Chain, PrivateKeyAccount>,\n  tripId: string,\n  ratId: string\n): Promise<EnterTripReturnValue> {\n  const requestBody: EnterTripRequestBody = {\n    tripId,\n    ratId\n  }\n\n  const signedRequest = await signRequest(requestBody, walletClient)\n\n  const url = `${serverUrl}/trip/enter`\n\n  // Start a ticker to show progress while waiting\n  let seconds = 0\n  const ticker = setInterval(() => {\n    seconds++\n    process.stdout.write(`\\r Waiting for trip result... ${seconds}s`)\n  }, 1000)\n\n  // 45 second timeout to allow for server processing\n  const controller = new AbortController()\n  const timeoutId = setTimeout(() => controller.abort(), 45000)\n\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(signedRequest),\n      signal: controller.signal\n    })\n\n    clearInterval(ticker)\n    clearTimeout(timeoutId)\n    process.stdout.write(\"\\r\" + \" \".repeat(40) + \"\\r\") // Clear the ticker line\n\n    if (!response.ok) {\n      const error = await response.json()\n      throw new Error(`Server error: ${error.error}: ${error.message}`)\n    }\n\n    const outcome = (await response.json()) as EnterTripReturnValue\n    return outcome\n  } catch (err) {\n    clearInterval(ticker)\n    clearTimeout(timeoutId)\n    process.stdout.write(\"\\r\" + \" \".repeat(40) + \"\\r\") // Clear the ticker line\n\n    if (err instanceof Error) {\n      if (err.name === \"AbortError\") {\n        throw new Error(\"Request timed out after 45 seconds\")\n      }\n      if (err.message.includes(\"Failed to fetch\") || err.message.includes(\"NetworkError\")) {\n        throw new Error(`Network error: ${err.message}`)\n      }\n    }\n\n    throw err\n  }\n}\n","import type { Trip } from \"../../types\"\n\n/**\n * Simple heuristic-based trip selection\n * Selects the trip with the highest balance\n */\nexport function selectTripHeuristic(trips: Trip[]): Trip | null {\n  if (trips.length === 0) return null\n\n  // Sort by balance descending\n  const sorted = [...trips].sort((a, b) => b.balance - a.balance)\n  return sorted[0]\n}\n\n/**\n * Select a random trip\n */\nexport function selectTripRandom(trips: Trip[]): Trip | null {\n  if (trips.length === 0) return null\n\n  const randomIndex = Math.floor(Math.random() * trips.length)\n  return trips[randomIndex]\n}\n","import Anthropic from \"@anthropic-ai/sdk\"\nimport type { Trip, Rat, TripOutcomeHistory, TripSelectionResult } from \"../../types\"\n\ninterface ClaudeResponse {\n  tripId: string\n  explanation: string\n}\n\n/**\n * Use Claude to evaluate and select the best trip\n */\nexport async function selectTripWithClaude(\n  anthropic: Anthropic,\n  trips: Trip[],\n  rat: Rat,\n  outcomeHistory: TripOutcomeHistory[] = []\n): Promise<TripSelectionResult | null> {\n  if (trips.length === 0) return null\n\n  if (trips.length === 1) {\n    return {\n      trip: trips[0],\n      explanation: \"Only one trip available\"\n    }\n  }\n\n  const tripsForPrompt = trips.map(t => {\n    // Calculate certainty-weighted survival rate using Bayesian approach\n    // With low visit counts, regress toward 50% (uncertain)\n    // As visits increase, trust the actual survival rate more\n    const priorWeight = 5 // Equivalent to 5 prior visits at 50% survival\n    const priorSurvival = priorWeight * 0.5\n    const actualSurvival = t.visitCount - t.killCount\n    const weightedSurvivalRate = Math.round(\n      ((priorSurvival + actualSurvival) / (priorWeight + t.visitCount)) * 100\n    )\n\n    return {\n      id: t.id,\n      prompt: t.prompt,\n      balance: t.balance,\n      visitCount: t.visitCount,\n      killCount: t.killCount,\n      survivalRate: weightedSurvivalRate,\n      confidence: t.visitCount >= 10 ? \"high\" : t.visitCount >= 5 ? \"medium\" : \"low\"\n    }\n  })\n\n  let historySection = \"\"\n  if (outcomeHistory.length > 0) {\n    // Filter history to only include outcomes for currently available trips\n    const availableTripIds = new Set(trips.map(t => t.id))\n    const relevantHistory = outcomeHistory.filter(h => availableTripIds.has(h.tripId)).slice(-10)\n\n    if (relevantHistory.length > 0) {\n      historySection = `\n## Previous Trip Outcomes (for learning)\nHere are the outcomes of recent trips this rat has taken on currently available trips. Use this to inform your strategy:\n${JSON.stringify(relevantHistory, null, 2)}\n\nNote: valueChange represents the change in TOTAL VALUE (balance + inventory items). This is the key success metric.\n\nAnalyze patterns:\n If rat died or lost a lot of value in a trip, do not re-enter unless there is very clear ground to assume the outcome will be different this time.\n- Which types of trip prompts led to positive vs negative valueChange?\n- How do items gained/lost affect total value?\n- What scenarios were dangerous (led to death or large value losses)?\n- What strategies seem to work best?\n- health, token, cash, money, points etc all mean the same thing and are interchangeable. exhanging one for the other 1:1 is pointless.\n`\n    }\n  }\n\n  const prompt = `You are an AI strategist helping a rat named \"${rat.name}\" choose which trip to enter in a game.\n\n## Primary Goal\nYour goal is to INCREASE the rat's TOTAL VALUE (balance + inventory item values). The rat gains value by completing trips that provide positive value changes - this includes gaining balance OR valuable items. Trips that result in 0 value change are wasteful - they risk death without any reward. Always prioritize trips likely to yield positive total value gains.\n\n## Current Rat State\n- Balance: ${rat.balance} credits\n- Items in inventory: ${rat.inventory.length}\n- Total trips survived: ${rat.tripCount}\n${historySection}\n## Available Trips\n${JSON.stringify(tripsForPrompt, null, 2)}\n\n## Your Task\nAnalyze each trip's prompt, balance, and statistics to maximize TOTAL VALUE gain. Consider:\n1. Which trip is most likely to result in a POSITIVE value change (balance + items)? Avoid trips that seem likely to have no reward.\n2. Which trip has the best risk/reward ratio? High balance trips often mean higher potential gains.\n3. Based on the trip prompt, does it suggest opportunities for the rat to find loot, treasure, or rewards?\n4. Avoid trips with prompts suggesting high danger with no clear reward opportunity.\n5. Carefully evaluate if a trip requires the rat to have a particular item to succeed. Or if a particular item that the rat currently has gives it an advantage.\n6. IMPORTANT: Use the trip statistics to assess danger:\n   - survivalRate: Bayesian-weighted survival percentage (accounts for sample size uncertainty)\n   - confidence: \"high\" (10+ visits), \"medium\" (5-9 visits), \"low\" (<5 visits)\n   - Prefer trips with high survivalRate AND high confidence. Be cautious of \"low\" confidence trips - their survival rate is uncertain.\n${outcomeHistory.length > 0 ? \"6. What patterns from previous outcomes show which trip types yield gains vs losses or deaths?\" : \"\"}\n\n## Response Format\nRespond with a JSON object containing:\n- tripId: The full ID of your chosen trip\n- explanation: A brief (1-2 sentence) explanation of why you chose this trip\n\nExample:\n\\`\\`\\`json\n{\n  \"tripId\": \"0x1234...\",\n  \"explanation\": \"This trip offers high rewards with a relatively safe scenario based on the prompt.\"\n}\n\\`\\`\\`\n\nRespond with ONLY the JSON object, no other text.`\n\n  try {\n    const response = await anthropic.messages.create({\n      model: \"claude-sonnet-4-20250514\",\n      max_tokens: 300,\n      messages: [{ role: \"user\", content: prompt }]\n    })\n\n    const content = response.content[0]\n    if (content.type !== \"text\") {\n      console.warn(\"Unexpected response type from Claude, falling back to heuristic\")\n      return fallbackSelection(trips)\n    }\n\n    // Parse JSON response\n    let parsed: ClaudeResponse\n    try {\n      // Extract JSON from response (handle markdown code blocks)\n      let jsonText = content.text.trim()\n      if (jsonText.startsWith(\"```json\")) {\n        jsonText = jsonText.slice(7)\n      }\n      if (jsonText.startsWith(\"```\")) {\n        jsonText = jsonText.slice(3)\n      }\n      if (jsonText.endsWith(\"```\")) {\n        jsonText = jsonText.slice(0, -3)\n      }\n      parsed = JSON.parse(jsonText.trim())\n    } catch {\n      console.warn(\"Failed to parse Claude response as JSON:\", content.text)\n      return fallbackSelection(trips)\n    }\n\n    // Find the trip with this ID\n    const selectedTrip = trips.find(t => t.id === parsed.tripId)\n\n    if (!selectedTrip) {\n      console.warn(`Claude selected unknown trip ID: ${parsed.tripId}, falling back to heuristic`)\n      return fallbackSelection(trips)\n    }\n\n    return {\n      trip: selectedTrip,\n      explanation: parsed.explanation\n    }\n  } catch (error) {\n    console.error(\"Error calling Claude API:\", error)\n    console.warn(\"Falling back to heuristic selection\")\n    return fallbackSelection(trips)\n  }\n}\n\nfunction fallbackSelection(trips: Trip[]): TripSelectionResult {\n  const trip = trips.sort((a, b) => b.balance - a.balance)[0]\n  return {\n    trip,\n    explanation: \"Fallback: selected trip with highest balance\"\n  }\n}\n","import { createClient, type SanityClient } from \"@sanity/client\"\n\nconst PUBLIC_SANITY_CMS_ID = \"saljmqwt\"\n\nexport const sanityClient: SanityClient = createClient({\n  projectId: PUBLIC_SANITY_CMS_ID,\n  dataset: \"production\",\n  apiVersion: \"2025-06-01\",\n  useCdn: false\n})\n\nexport interface Outcome {\n  _id: string\n  tripId: string\n  ratId: string\n  ratName: string\n  ratValueChange: number\n  ratValue: number\n  oldRatValue: number\n  newRatBalance: number\n  oldRatBalance: number\n}\n\n/**\n * Fetch all outcomes for a specific trip from the public CMS\n */\nexport async function getOutcomesForTrip(tripId: string, worldAddress: string): Promise<Outcome[]> {\n  const query = `*[_type == \"outcome\" && tripId == $tripId && worldAddress == $worldAddress] {\n    _id,\n    tripId,\n    ratId,\n    ratName,\n    ratValueChange,\n    ratValue,\n    oldRatValue,\n    newRatBalance,\n    oldRatBalance\n  }`\n\n  return sanityClient.fetch(query, { tripId, worldAddress })\n}\n\n/**\n * Fetch outcomes for multiple trips in a single query\n */\nexport async function getOutcomesForTrips(\n  tripIds: string[],\n  worldAddress: string\n): Promise<Outcome[]> {\n  const query = `*[_type == \"outcome\" && tripId in $tripIds && worldAddress == $worldAddress] {\n    _id,\n    tripId,\n    ratId,\n    ratName,\n    ratValueChange,\n    ratValue,\n    oldRatValue,\n    newRatBalance,\n    oldRatBalance\n  }`\n\n  return sanityClient.fetch(query, { tripIds, worldAddress })\n}\n","import type { Trip, TripSelectionResult } from \"../../types\"\nimport { getOutcomesForTrips, type Outcome } from \"../cms\"\n\ninterface TripStats {\n  tripId: string\n  trip: Trip\n  totalOutcomes: number\n  avgValueChange: number\n  totalValueChange: number\n  survivalRate: number\n  deaths: number\n}\n\n/**\n * Calculate statistics for each trip based on historical outcomes\n */\nfunction calculateTripStats(trips: Trip[], outcomes: Outcome[]): TripStats[] {\n  const outcomesByTrip = new Map<string, Outcome[]>()\n\n  // Group outcomes by trip\n  for (const outcome of outcomes) {\n    const existing = outcomesByTrip.get(outcome.tripId) || []\n    existing.push(outcome)\n    outcomesByTrip.set(outcome.tripId, existing)\n  }\n\n  return trips.map(trip => {\n    const tripOutcomes = outcomesByTrip.get(trip.id) || []\n    const totalOutcomes = tripOutcomes.length\n\n    if (totalOutcomes === 0) {\n      return {\n        tripId: trip.id,\n        trip,\n        totalOutcomes: 0,\n        avgValueChange: 0,\n        totalValueChange: 0,\n        survivalRate: 0.5, // Unknown, assume 50%\n        deaths: 0\n      }\n    }\n\n    const totalValueChange = tripOutcomes.reduce((sum, o) => sum + (o.ratValueChange ?? 0), 0)\n    const avgValueChange = totalValueChange / totalOutcomes\n\n    // Death is when newRatBalance becomes 0 (and wasn't 0 before)\n    const deaths = tripOutcomes.filter(\n      o => (o.newRatBalance ?? 0) === 0 && (o.oldRatBalance ?? 0) > 0\n    ).length\n    const survivalRate = (totalOutcomes - deaths) / totalOutcomes\n\n    return {\n      tripId: trip.id,\n      trip,\n      totalOutcomes,\n      avgValueChange,\n      totalValueChange,\n      survivalRate,\n      deaths\n    }\n  })\n}\n\n/**\n * Score a trip based on historical data\n * Higher score = better trip to enter\n *\n * We use avgValueChange directly since death outcomes (large negative values)\n * are already reflected in the average.\n */\nfunction scoreTrip(stats: TripStats): number {\n  // If no historical data, use a neutral score based on trip balance\n  if (stats.totalOutcomes === 0) {\n    // Unknown trips get a small positive score based on their balance\n    // This encourages exploration but with lower priority than known good trips\n    return stats.trip.balance * 0.1\n  }\n\n  // Add a small bonus for having more data (more confident in the estimate)\n  const confidenceBonus = Math.min(stats.totalOutcomes / 20, 1) * 10\n\n  return stats.avgValueChange + confidenceBonus\n}\n\n/**\n * Select the best trip based on historical outcome data from the CMS\n */\nexport async function selectTripHistorical(\n  trips: Trip[],\n  worldAddress: string\n): Promise<TripSelectionResult | null> {\n  if (trips.length === 0) return null\n\n  // Fetch all outcomes for these trips from the CMS\n  const tripIds = trips.map(t => t.id)\n  const outcomes = await getOutcomesForTrips(tripIds, worldAddress)\n\n  // Calculate stats for each trip\n  const stats = calculateTripStats(trips, outcomes)\n\n  // Score each trip and find the best one\n  const scoredTrips = stats.map(s => ({\n    stats: s,\n    score: scoreTrip(s)\n  }))\n\n  // Sort by score descending\n  scoredTrips.sort((a, b) => b.score - a.score)\n\n  const best = scoredTrips[0]\n  if (!best) return null\n\n  // Build explanation\n  let explanation: string\n  if (best.stats.totalOutcomes === 0) {\n    explanation = `No historical data, selected based on trip balance (${best.stats.trip.balance})`\n  } else {\n    const avgStr =\n      best.stats.avgValueChange >= 0\n        ? `+${best.stats.avgValueChange.toFixed(1)}`\n        : best.stats.avgValueChange.toFixed(1)\n    const survivalPct = (best.stats.survivalRate * 100).toFixed(0)\n    explanation = `Best historical performance: avg ${avgStr} value change, ${survivalPct}% survival rate (${best.stats.totalOutcomes} outcomes)`\n  }\n\n  return {\n    trip: best.stats.trip,\n    explanation\n  }\n}\n","/**\n * ========================================\n * Graph-Based Trip Selection Strategy Types\n * ========================================\n *\n * This module defines types for an in-memory graph that models:\n * - Trip nodes with outcome statistics\n * - Item influence on trip outcomes\n * - Successful rat path patterns\n * - Value-gated accessibility between trips\n */\n\nimport type { Trip } from \"../../../types\"\n\n// =============================================================================\n// VALUE BUCKETS\n// Outcomes vary based on rat's entry value - segment analysis by value range\n// =============================================================================\n\nexport type ValueBucket = \"very_low\" | \"low\" | \"medium\" | \"high\" | \"very_high\"\n\nexport const VALUE_BUCKET_RANGES: Record<ValueBucket, { min: number; max: number }> = {\n  very_low: { min: 0, max: 200 },\n  low: { min: 200, max: 1000 },\n  medium: { min: 1000, max: 3000 },\n  high: { min: 3000, max: 10000 },\n  very_high: { min: 10000, max: Infinity }\n}\n\n// =============================================================================\n// ITEM TRACKING\n// =============================================================================\n\nexport interface ItemInfo {\n  id: string\n  name: string\n  value: number\n}\n\n/**\n * Tracks how a specific item influences outcomes on a trip\n */\nexport interface ItemInfluence {\n  itemId: string\n  itemName: string\n\n  // Stats when rat HAD this item on entrance\n  withItem: {\n    outcomes: number\n    avgValueChange: number\n    survivalRate: number\n    // Items commonly gained when entering with this item\n    commonGains: Array<{ itemName: string; frequency: number }>\n  }\n\n  // Stats when rat did NOT have this item\n  withoutItem: {\n    outcomes: number\n    avgValueChange: number\n    survivalRate: number\n  }\n\n  // Computed influence score (positive = item helps, negative = item hurts)\n  influenceScore: number\n}\n\n/**\n * Items commonly awarded by a trip\n */\nexport interface ItemAward {\n  itemId: string\n  itemName: string\n  itemValue: number\n  frequency: number // 0-1, how often this item is awarded\n  // Conditional: more likely if rat survives with high value gain\n  conditionalOnSuccess: boolean\n}\n\n// =============================================================================\n// TRIP STATISTICS\n// =============================================================================\n\nexport interface BucketStats {\n  bucket: ValueBucket\n  outcomes: number\n  avgValueChange: number\n  medianValueChange: number\n  stdDevValueChange: number\n  survivalRate: number\n  avgValueGainOnSurvival: number\n  avgValueLossOnDeath: number\n}\n\nexport interface TripStatistics {\n  tripId: string\n  totalOutcomes: number\n  lastUpdated: Date\n\n  // Overall stats\n  overall: {\n    avgValueChange: number\n    medianValueChange: number\n    stdDevValueChange: number\n    survivalRate: number\n    avgValueGainOnSurvival: number\n    avgValueLossOnDeath: number\n  }\n\n  // Segmented by entry value\n  byValueBucket: Map<ValueBucket, BucketStats>\n\n  // Item influence analysis\n  itemInfluence: Map<string, ItemInfluence> // itemName -> influence\n\n  // Items commonly awarded by this trip\n  itemAwards: ItemAward[]\n\n  // Trips commonly taken BEFORE this one (predecessor analysis)\n  commonPredecessors: Array<{\n    tripId: string\n    frequency: number\n    avgValueChangeAfter: number // How well rats did on THIS trip after coming from predecessor\n  }>\n\n  // Trips commonly taken AFTER this one (successor analysis)\n  commonSuccessors: Array<{\n    tripId: string\n    frequency: number\n    avgValueChangeOnSuccessor: number\n  }>\n}\n\n// =============================================================================\n// TRIP NODE (Graph Vertex)\n// =============================================================================\n\nexport interface TripNode {\n  tripId: string\n  trip: Trip\n  stats: TripStatistics\n\n  // Minimum rat value required to enter\n  minEntryValue: number\n\n  // Is this trip currently active (has balance)?\n  active: boolean\n}\n\n// =============================================================================\n// TRIP EDGE (Graph Edge - computed dynamically)\n// =============================================================================\n\nexport interface TripEdge {\n  fromTripId: string\n  toTripId: string\n\n  // Probability this edge is traversable (rat survives from AND can afford to)\n  accessibilityProbability: number\n\n  // Expected value gained by taking this path\n  expectedValueGain: number\n\n  // Items that make this transition more successful\n  beneficialItems: string[]\n\n  // Historical success rate of this specific transition\n  transitionSuccessRate: number\n  transitionCount: number\n}\n\n// =============================================================================\n// RAT JOURNEY (Path Reconstruction)\n// =============================================================================\n\nexport interface JourneyStep {\n  tripId: string\n  tripPrompt: string\n  valueChange: number\n  valueBefore: number\n  valueAfter: number\n  survived: boolean\n  itemsOnEntrance: ItemInfo[]\n  itemsGained: ItemInfo[]\n  itemsLost: ItemInfo[]\n}\n\nexport interface RatJourney {\n  ratId: string\n  ratName: string\n  playerId: string\n\n  // The sequence of trips this rat took\n  steps: JourneyStep[]\n\n  // Journey metrics\n  totalTrips: number\n  totalValueGained: number\n  finalValue: number\n  survived: boolean // Did rat survive entire journey?\n\n  // Peak value achieved\n  peakValue: number\n  peakValueStep: number\n\n  // Items collected during journey\n  uniqueItemsCollected: string[]\n}\n\n/**\n * A successful path pattern extracted from multiple rat journeys\n */\nexport interface PathPattern {\n  // Sequence of trip IDs\n  tripSequence: string[]\n\n  // How many rats followed this exact pattern\n  occurrences: number\n\n  // Average total value gain for rats following this pattern\n  avgTotalValueGain: number\n\n  // Survival rate through entire pattern\n  completionRate: number\n\n  // Key items that successful rats had\n  keyItems: Array<{\n    itemName: string\n    acquiredAtStep: number\n    importanceScore: number\n  }>\n\n  // Entry value range where this pattern works best\n  optimalEntryValueRange: { min: number; max: number }\n}\n\n// =============================================================================\n// GRAPH STATE\n// =============================================================================\n\nexport interface TripGraph {\n  worldAddress: string\n  nodes: Map<string, TripNode>\n  edges: Map<string, TripEdge[]> // fromTripId -> edges\n\n  // Reconstructed successful journeys\n  successfulJourneys: RatJourney[]\n\n  // Extracted path patterns\n  pathPatterns: PathPattern[]\n\n  // Metadata\n  lastFullRebuild: Date\n  outcomeCount: number\n\n  // Game config cached\n  minRatValueToEnterPercent: number\n}\n\n// =============================================================================\n// STRATEGY CONFIGURATION\n// =============================================================================\n\nexport interface GraphStrategyConfig {\n  // Pathfinding parameters\n  lookAheadDepth: number // How many trips to look ahead (default: 3)\n  simulations: number // Monte Carlo simulations per path (default: 50)\n\n  // Risk parameters\n  riskTolerance: number // 0-1, higher = accept more death risk (default: 0.5)\n  minSurvivalRate: number // Don't consider trips below this survival rate (default: 0.3)\n\n  // Exploration vs exploitation\n  explorationBonus: number // Bonus for low-data trips (default: 0.2)\n  minOutcomesForConfidence: number // Need this many outcomes for confidence (default: 5)\n\n  // Item considerations\n  itemInfluenceWeight: number // How much to weight item bonuses (default: 1.0)\n\n  // Path pattern matching\n  usePathPatterns: boolean // Try to follow successful patterns (default: true)\n  pathPatternWeight: number // Weight for pattern matching bonus (default: 0.5)\n}\n\nexport const DEFAULT_GRAPH_CONFIG: GraphStrategyConfig = {\n  lookAheadDepth: 1, // Reduced from 3 to avoid O(n^depth) exponential blowup with many trips\n  simulations: 50,\n  riskTolerance: 0.5,\n  minSurvivalRate: 0.3,\n  explorationBonus: 0.2,\n  minOutcomesForConfidence: 5,\n  itemInfluenceWeight: 1.0,\n  usePathPatterns: true,\n  pathPatternWeight: 0.5\n}\n\n// =============================================================================\n// CMS OUTCOME (Extended for graph building)\n// =============================================================================\n\nexport interface ExtendedOutcome {\n  _id: string\n  _createdAt: string\n  tripId: string\n  tripIndex: number\n  ratId: string\n  ratName: string\n  playerId: string\n  playerName: string\n\n  // Value tracking\n  ratValueChange: number\n  ratValue: number\n  oldRatValue: number\n  newRatBalance: number\n  oldRatBalance: number\n\n  // Item tracking\n  inventoryOnEntrance: ItemInfo[]\n  itemChanges: Array<{\n    name: string\n    type: \"gained\" | \"lost\"\n    value: number\n    id: string\n  }>\n  itemsLostOnDeath: ItemInfo[]\n\n  // Derived\n  died: boolean\n  survived: boolean\n}\n\n// =============================================================================\n// SCORING RESULT\n// =============================================================================\n\nexport interface TripScore {\n  tripId: string\n  trip: Trip\n\n  // Component scores\n  baseExpectedValue: number\n  survivalAdjustment: number\n  itemInfluenceBonus: number\n  explorationBonus: number\n  lookAheadValue: number\n  pathPatternBonus: number\n\n  // Final score\n  totalScore: number\n\n  // Explanation components\n  explanation: {\n    primary: string\n    details: string[]\n  }\n}\n","/**\n * ========================================\n * Statistics Calculator\n * ========================================\n *\n * Computes trip statistics from CMS outcomes including:\n * - Value bucket segmentation\n * - Item influence analysis\n * - Item award patterns\n * - Predecessor/successor trip analysis\n */\n\nimport type {\n  ExtendedOutcome,\n  TripStatistics,\n  BucketStats,\n  ItemInfluence,\n  ItemAward,\n  ValueBucket\n} from \"./types\"\nimport { VALUE_BUCKET_RANGES } from \"./types\"\nimport type { Trip } from \"../../../types\"\n\n// =============================================================================\n// HELPERS\n// =============================================================================\n\nfunction getValueBucket(value: number): ValueBucket {\n  for (const [bucket, range] of Object.entries(VALUE_BUCKET_RANGES)) {\n    if (value >= range.min && value < range.max) {\n      return bucket as ValueBucket\n    }\n  }\n  return \"very_high\"\n}\n\nfunction median(values: number[]): number {\n  if (values.length === 0) return 0\n  const sorted = [...values].sort((a, b) => a - b)\n  const mid = Math.floor(sorted.length / 2)\n  return sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2\n}\n\nfunction stdDev(values: number[], mean: number): number {\n  if (values.length < 2) return 0\n  const squaredDiffs = values.map(v => Math.pow(v - mean, 2))\n  return Math.sqrt(squaredDiffs.reduce((a, b) => a + b, 0) / values.length)\n}\n\nfunction normalizeOutcome(outcome: ExtendedOutcome): ExtendedOutcome {\n  // Ensure all fields have defaults\n  return {\n    ...outcome,\n    inventoryOnEntrance: outcome.inventoryOnEntrance || [],\n    itemChanges: outcome.itemChanges || [],\n    itemsLostOnDeath: outcome.itemsLostOnDeath || [],\n    died: outcome.newRatBalance === 0 && outcome.oldRatBalance > 0,\n    survived: !(outcome.newRatBalance === 0 && outcome.oldRatBalance > 0)\n  }\n}\n\n// =============================================================================\n// MAIN STATISTICS CALCULATOR\n// =============================================================================\n\nexport function calculateTripStatistics(\n  trip: Trip,\n  outcomes: ExtendedOutcome[],\n  allOutcomes?: ExtendedOutcome[] // All outcomes for predecessor/successor analysis\n): TripStatistics {\n  const normalizedOutcomes = outcomes.map(normalizeOutcome)\n  const tripId = trip.id\n\n  // Initialize statistics structure\n  const stats: TripStatistics = {\n    tripId,\n    totalOutcomes: normalizedOutcomes.length,\n    lastUpdated: new Date(),\n    overall: {\n      avgValueChange: 0,\n      medianValueChange: 0,\n      stdDevValueChange: 0,\n      survivalRate: 0,\n      avgValueGainOnSurvival: 0,\n      avgValueLossOnDeath: 0\n    },\n    byValueBucket: new Map(),\n    itemInfluence: new Map(),\n    itemAwards: [],\n    commonPredecessors: [],\n    commonSuccessors: []\n  }\n\n  if (normalizedOutcomes.length === 0) {\n    return stats\n  }\n\n  // Calculate overall statistics\n  const valueChanges = normalizedOutcomes.map(o => o.ratValueChange)\n  const survived = normalizedOutcomes.filter(o => o.survived)\n  const died = normalizedOutcomes.filter(o => o.died)\n\n  stats.overall.avgValueChange = valueChanges.reduce((a, b) => a + b, 0) / valueChanges.length\n  stats.overall.medianValueChange = median(valueChanges)\n  stats.overall.stdDevValueChange = stdDev(valueChanges, stats.overall.avgValueChange)\n  stats.overall.survivalRate = survived.length / normalizedOutcomes.length\n\n  if (survived.length > 0) {\n    stats.overall.avgValueGainOnSurvival =\n      survived.map(o => o.ratValueChange).reduce((a, b) => a + b, 0) / survived.length\n  }\n\n  if (died.length > 0) {\n    stats.overall.avgValueLossOnDeath =\n      died.map(o => o.ratValueChange).reduce((a, b) => a + b, 0) / died.length\n  }\n\n  // Calculate by value bucket\n  stats.byValueBucket = calculateBucketStats(normalizedOutcomes)\n\n  // Calculate item influence\n  stats.itemInfluence = calculateItemInfluence(normalizedOutcomes)\n\n  // Calculate item awards\n  stats.itemAwards = calculateItemAwards(normalizedOutcomes)\n\n  // Calculate predecessor/successor patterns if we have all outcomes\n  if (allOutcomes && allOutcomes.length > 0) {\n    const { predecessors, successors } = calculateTripSequencePatterns(\n      tripId,\n      allOutcomes.map(normalizeOutcome)\n    )\n    stats.commonPredecessors = predecessors\n    stats.commonSuccessors = successors\n  }\n\n  return stats\n}\n\n// =============================================================================\n// BUCKET STATISTICS\n// =============================================================================\n\nfunction calculateBucketStats(outcomes: ExtendedOutcome[]): Map<ValueBucket, BucketStats> {\n  const bucketMap = new Map<ValueBucket, BucketStats>()\n  const bucketOutcomes = new Map<ValueBucket, ExtendedOutcome[]>()\n\n  // Group outcomes by entry value bucket\n  for (const outcome of outcomes) {\n    const bucket = getValueBucket(outcome.oldRatValue || 0)\n    const existing = bucketOutcomes.get(bucket) || []\n    existing.push(outcome)\n    bucketOutcomes.set(bucket, existing)\n  }\n\n  // Calculate stats for each bucket\n  for (const [bucket, bucketOuts] of bucketOutcomes) {\n    const valueChanges = bucketOuts.map(o => o.ratValueChange)\n    const survived = bucketOuts.filter(o => o.survived)\n    const died = bucketOuts.filter(o => o.died)\n\n    const avgValueChange = valueChanges.reduce((a, b) => a + b, 0) / valueChanges.length\n\n    const bucketStats: BucketStats = {\n      bucket,\n      outcomes: bucketOuts.length,\n      avgValueChange,\n      medianValueChange: median(valueChanges),\n      stdDevValueChange: stdDev(valueChanges, avgValueChange),\n      survivalRate: survived.length / bucketOuts.length,\n      avgValueGainOnSurvival:\n        survived.length > 0\n          ? survived.map(o => o.ratValueChange).reduce((a, b) => a + b, 0) / survived.length\n          : 0,\n      avgValueLossOnDeath:\n        died.length > 0\n          ? died.map(o => o.ratValueChange).reduce((a, b) => a + b, 0) / died.length\n          : 0\n    }\n\n    bucketMap.set(bucket, bucketStats)\n  }\n\n  return bucketMap\n}\n\n// =============================================================================\n// ITEM INFLUENCE ANALYSIS\n// =============================================================================\n\nfunction calculateItemInfluence(outcomes: ExtendedOutcome[]): Map<string, ItemInfluence> {\n  const influenceMap = new Map<string, ItemInfluence>()\n\n  // Collect all unique items that appeared in inventories\n  const allItems = new Map<string, { id: string; name: string }>()\n  for (const outcome of outcomes) {\n    for (const item of outcome.inventoryOnEntrance) {\n      if (item.name) {\n        allItems.set(item.name, { id: item.id, name: item.name })\n      }\n    }\n  }\n\n  // For each item, calculate stats with and without\n  for (const [itemName, itemInfo] of allItems) {\n    const withItem = outcomes.filter(o =>\n      o.inventoryOnEntrance.some(i => i.name === itemName)\n    )\n    const withoutItem = outcomes.filter(o =>\n      !o.inventoryOnEntrance.some(i => i.name === itemName)\n    )\n\n    // Skip if we don't have enough data for comparison\n    if (withItem.length < 2 || withoutItem.length < 2) {\n      continue\n    }\n\n    const withItemSurvived = withItem.filter(o => o.survived)\n    const withoutItemSurvived = withoutItem.filter(o => o.survived)\n\n    const withItemAvgChange =\n      withItem.map(o => o.ratValueChange).reduce((a, b) => a + b, 0) / withItem.length\n    const withoutItemAvgChange =\n      withoutItem.map(o => o.ratValueChange).reduce((a, b) => a + b, 0) / withoutItem.length\n\n    const withItemSurvivalRate = withItemSurvived.length / withItem.length\n    const withoutItemSurvivalRate = withoutItemSurvived.length / withoutItem.length\n\n    // Calculate common gains when entering with this item\n    const itemGains = new Map<string, number>()\n    for (const outcome of withItem) {\n      for (const change of outcome.itemChanges) {\n        if (change.type === \"gained\" && change.name) {\n          itemGains.set(change.name, (itemGains.get(change.name) || 0) + 1)\n        }\n      }\n    }\n\n    const commonGains = Array.from(itemGains.entries())\n      .map(([name, count]) => ({ itemName: name, frequency: count / withItem.length }))\n      .filter(g => g.frequency > 0.1) // At least 10% frequency\n      .sort((a, b) => b.frequency - a.frequency)\n      .slice(0, 5)\n\n    // Influence score: combination of value change and survival improvement\n    const valueInfluence = withItemAvgChange - withoutItemAvgChange\n    const survivalInfluence = (withItemSurvivalRate - withoutItemSurvivalRate) * 100 // Weight survival more\n    const influenceScore = valueInfluence + survivalInfluence\n\n    const influence: ItemInfluence = {\n      itemId: itemInfo.id,\n      itemName,\n      withItem: {\n        outcomes: withItem.length,\n        avgValueChange: withItemAvgChange,\n        survivalRate: withItemSurvivalRate,\n        commonGains\n      },\n      withoutItem: {\n        outcomes: withoutItem.length,\n        avgValueChange: withoutItemAvgChange,\n        survivalRate: withoutItemSurvivalRate\n      },\n      influenceScore\n    }\n\n    influenceMap.set(itemName, influence)\n  }\n\n  return influenceMap\n}\n\n// =============================================================================\n// ITEM AWARD ANALYSIS\n// =============================================================================\n\nfunction calculateItemAwards(outcomes: ExtendedOutcome[]): ItemAward[] {\n  const itemCounts = new Map<string, { count: number; value: number; id: string; successCount: number }>()\n\n  for (const outcome of outcomes) {\n    for (const change of outcome.itemChanges) {\n      if (change.type === \"gained\" && change.name) {\n        const existing = itemCounts.get(change.name) || {\n          count: 0,\n          value: change.value || 0,\n          id: change.id || \"\",\n          successCount: 0\n        }\n        existing.count++\n        if (outcome.survived && outcome.ratValueChange > 0) {\n          existing.successCount++\n        }\n        itemCounts.set(change.name, existing)\n      }\n    }\n  }\n\n  const awards: ItemAward[] = []\n  for (const [itemName, data] of itemCounts) {\n    const frequency = data.count / outcomes.length\n    const conditionalOnSuccess = data.successCount / data.count > 0.7 // 70%+ of awards on success\n\n    awards.push({\n      itemId: data.id,\n      itemName,\n      itemValue: data.value,\n      frequency,\n      conditionalOnSuccess\n    })\n  }\n\n  return awards\n    .filter(a => a.frequency > 0.05) // At least 5% frequency\n    .sort((a, b) => b.frequency - a.frequency)\n}\n\n// =============================================================================\n// TRIP SEQUENCE PATTERNS\n// =============================================================================\n\ninterface TripSequenceResult {\n  predecessors: Array<{\n    tripId: string\n    frequency: number\n    avgValueChangeAfter: number\n  }>\n  successors: Array<{\n    tripId: string\n    frequency: number\n    avgValueChangeOnSuccessor: number\n  }>\n}\n\nfunction calculateTripSequencePatterns(\n  tripId: string,\n  allOutcomes: ExtendedOutcome[]\n): TripSequenceResult {\n  // Group outcomes by rat to reconstruct journeys\n  const outcomesbyRat = new Map<string, ExtendedOutcome[]>()\n  for (const outcome of allOutcomes) {\n    const existing = outcomesbyRat.get(outcome.ratId) || []\n    existing.push(outcome)\n    outcomesbyRat.set(outcome.ratId, existing)\n  }\n\n  // Sort each rat's outcomes by creation date\n  for (const outcomes of outcomesbyRat.values()) {\n    outcomes.sort((a, b) => new Date(a._createdAt).getTime() - new Date(b._createdAt).getTime())\n  }\n\n  // Find predecessors and successors\n  const predecessorCounts = new Map<string, { count: number; valueChanges: number[] }>()\n  const successorCounts = new Map<string, { count: number; valueChanges: number[] }>()\n\n  for (const ratOutcomes of outcomesbyRat.values()) {\n    for (let i = 0; i < ratOutcomes.length; i++) {\n      if (ratOutcomes[i].tripId === tripId) {\n        // Found this trip in the rat's journey\n\n        // Check predecessor (trip before this one)\n        if (i > 0) {\n          const prevTripId = ratOutcomes[i - 1].tripId\n          const existing = predecessorCounts.get(prevTripId) || { count: 0, valueChanges: [] }\n          existing.count++\n          existing.valueChanges.push(ratOutcomes[i].ratValueChange) // How well rat did on THIS trip\n          predecessorCounts.set(prevTripId, existing)\n        }\n\n        // Check successor (trip after this one)\n        if (i < ratOutcomes.length - 1 && ratOutcomes[i].survived) {\n          const nextTripId = ratOutcomes[i + 1].tripId\n          const existing = successorCounts.get(nextTripId) || { count: 0, valueChanges: [] }\n          existing.count++\n          existing.valueChanges.push(ratOutcomes[i + 1].ratValueChange) // How well rat did on NEXT trip\n          successorCounts.set(nextTripId, existing)\n        }\n      }\n    }\n  }\n\n  // Calculate predecessor stats\n  const thisTripsOutcomes = allOutcomes.filter(o => o.tripId === tripId)\n  const totalOccurrences = thisTripsOutcomes.length\n\n  const predecessors = Array.from(predecessorCounts.entries())\n    .map(([predTripId, data]) => ({\n      tripId: predTripId,\n      frequency: data.count / totalOccurrences,\n      avgValueChangeAfter:\n        data.valueChanges.length > 0\n          ? data.valueChanges.reduce((a, b) => a + b, 0) / data.valueChanges.length\n          : 0\n    }))\n    .filter(p => p.frequency > 0.05) // At least 5% frequency\n    .sort((a, b) => b.frequency - a.frequency)\n    .slice(0, 10)\n\n  const survivedCount = thisTripsOutcomes.filter(o => o.survived).length\n  const successors = Array.from(successorCounts.entries())\n    .map(([succTripId, data]) => ({\n      tripId: succTripId,\n      frequency: survivedCount > 0 ? data.count / survivedCount : 0,\n      avgValueChangeOnSuccessor:\n        data.valueChanges.length > 0\n          ? data.valueChanges.reduce((a, b) => a + b, 0) / data.valueChanges.length\n          : 0\n    }))\n    .filter(s => s.frequency > 0.05)\n    .sort((a, b) => b.frequency - a.frequency)\n    .slice(0, 10)\n\n  return { predecessors, successors }\n}\n\n// =============================================================================\n// INCREMENTAL UPDATE\n// =============================================================================\n\n/**\n * Update statistics with a new outcome (incremental update)\n */\nexport function updateStatisticsWithOutcome(\n  existingStats: TripStatistics,\n  newOutcome: ExtendedOutcome\n): TripStatistics {\n  const outcome = normalizeOutcome(newOutcome)\n  const n = existingStats.totalOutcomes\n  const newN = n + 1\n\n  // Update overall statistics incrementally\n  const newAvgValueChange =\n    (existingStats.overall.avgValueChange * n + outcome.ratValueChange) / newN\n\n  const oldSurvivedCount = existingStats.overall.survivalRate * n\n  const newSurvivedCount = oldSurvivedCount + (outcome.survived ? 1 : 0)\n  const newSurvivalRate = newSurvivedCount / newN\n\n  // Update the stats\n  const updatedStats: TripStatistics = {\n    ...existingStats,\n    totalOutcomes: newN,\n    lastUpdated: new Date(),\n    overall: {\n      ...existingStats.overall,\n      avgValueChange: newAvgValueChange,\n      survivalRate: newSurvivalRate\n      // Note: median and stdDev would need full recalculation for accuracy\n      // but we keep them as approximations for performance\n    }\n  }\n\n  // Update bucket stats\n  const bucket = getValueBucket(outcome.oldRatValue || 0)\n  const existingBucket = existingStats.byValueBucket.get(bucket)\n\n  if (existingBucket) {\n    const bucketN = existingBucket.outcomes\n    const newBucketN = bucketN + 1\n    const newBucketAvg =\n      (existingBucket.avgValueChange * bucketN + outcome.ratValueChange) / newBucketN\n    const oldBucketSurvived = existingBucket.survivalRate * bucketN\n    const newBucketSurvived = oldBucketSurvived + (outcome.survived ? 1 : 0)\n\n    updatedStats.byValueBucket.set(bucket, {\n      ...existingBucket,\n      outcomes: newBucketN,\n      avgValueChange: newBucketAvg,\n      survivalRate: newBucketSurvived / newBucketN\n    })\n  } else {\n    updatedStats.byValueBucket.set(bucket, {\n      bucket,\n      outcomes: 1,\n      avgValueChange: outcome.ratValueChange,\n      medianValueChange: outcome.ratValueChange,\n      stdDevValueChange: 0,\n      survivalRate: outcome.survived ? 1 : 0,\n      avgValueGainOnSurvival: outcome.survived ? outcome.ratValueChange : 0,\n      avgValueLossOnDeath: outcome.died ? outcome.ratValueChange : 0\n    })\n  }\n\n  // Item influence and awards would need more complex incremental updates\n  // For now, we mark them as potentially stale and do full recalc periodically\n\n  return updatedStats\n}\n\n// =============================================================================\n// EXPORTS\n// =============================================================================\n\nexport { getValueBucket, median, stdDev }\n","/**\n * ========================================\n * Path Reconstruction\n * ========================================\n *\n * Reconstructs individual rat journeys from historical outcomes to:\n * - Identify successful path patterns\n * - Track item acquisition sequences\n * - Find optimal entry points and progressions\n * - Learn which item combinations lead to success\n */\n\nimport type {\n  ExtendedOutcome,\n  RatJourney,\n  JourneyStep,\n  PathPattern,\n  ItemInfo\n} from \"./types\"\n\n// =============================================================================\n// JOURNEY RECONSTRUCTION\n// =============================================================================\n\n/**\n * Reconstruct all rat journeys from historical outcomes\n */\nexport function reconstructJourneys(outcomes: ExtendedOutcome[]): RatJourney[] {\n  // Group outcomes by rat\n  const outcomesByRat = new Map<string, ExtendedOutcome[]>()\n  for (const outcome of outcomes) {\n    const existing = outcomesByRat.get(outcome.ratId) || []\n    existing.push(outcome)\n    outcomesByRat.set(outcome.ratId, existing)\n  }\n\n  const journeys: RatJourney[] = []\n\n  for (const [ratId, ratOutcomes] of outcomesByRat) {\n    // Sort by creation date to get chronological order\n    const sorted = [...ratOutcomes].sort(\n      (a, b) => new Date(a._createdAt).getTime() - new Date(b._createdAt).getTime()\n    )\n\n    const journey = buildJourney(ratId, sorted)\n    if (journey.steps.length > 0) {\n      journeys.push(journey)\n    }\n  }\n\n  return journeys\n}\n\nfunction buildJourney(ratId: string, sortedOutcomes: ExtendedOutcome[]): RatJourney {\n  const steps: JourneyStep[] = []\n  let peakValue = 0\n  let peakValueStep = 0\n  const uniqueItems = new Set<string>()\n\n  for (let i = 0; i < sortedOutcomes.length; i++) {\n    const outcome = sortedOutcomes[i]\n    const died = outcome.newRatBalance === 0 && outcome.oldRatBalance > 0\n    const survived = !died\n\n    // Track items\n    const itemsOnEntrance: ItemInfo[] = (outcome.inventoryOnEntrance || []).map(item => ({\n      id: item.id || \"\",\n      name: item.name || \"\",\n      value: item.value || 0\n    }))\n\n    const itemsGained: ItemInfo[] = (outcome.itemChanges || [])\n      .filter(c => c.type === \"gained\")\n      .map(c => ({\n        id: c.id || \"\",\n        name: c.name || \"\",\n        value: c.value || 0\n      }))\n\n    const itemsLost: ItemInfo[] = died\n      ? (outcome.itemsLostOnDeath || []).map(item => ({\n          id: item.id || \"\",\n          name: item.name || \"\",\n          value: item.value || 0\n        }))\n      : (outcome.itemChanges || [])\n          .filter(c => c.type === \"lost\")\n          .map(c => ({\n            id: c.id || \"\",\n            name: c.name || \"\",\n            value: c.value || 0\n          }))\n\n    // Track unique items collected\n    for (const item of itemsGained) {\n      if (item.name) uniqueItems.add(item.name)\n    }\n\n    const step: JourneyStep = {\n      tripId: outcome.tripId,\n      tripPrompt: \"\", // We don't have this in outcomes, will be enriched later\n      valueChange: outcome.ratValueChange,\n      valueBefore: outcome.oldRatValue || 0,\n      valueAfter: outcome.ratValue || 0,\n      survived,\n      itemsOnEntrance,\n      itemsGained,\n      itemsLost\n    }\n\n    steps.push(step)\n\n    // Track peak value\n    if (step.valueAfter > peakValue) {\n      peakValue = step.valueAfter\n      peakValueStep = i\n    }\n\n    // If rat died, this is the end of its journey\n    if (died) {\n      break\n    }\n  }\n\n  const firstOutcome = sortedOutcomes[0]\n  const lastStep = steps[steps.length - 1]\n\n  return {\n    ratId,\n    ratName: firstOutcome?.ratName || \"\",\n    playerId: firstOutcome?.playerId || \"\",\n    steps,\n    totalTrips: steps.length,\n    totalValueGained: steps.reduce((sum, s) => sum + s.valueChange, 0),\n    finalValue: lastStep?.valueAfter || 0,\n    survived: lastStep?.survived ?? false,\n    peakValue,\n    peakValueStep,\n    uniqueItemsCollected: Array.from(uniqueItems)\n  }\n}\n\n// =============================================================================\n// SUCCESS CRITERIA\n// =============================================================================\n\ninterface SuccessCriteria {\n  minTrips: number\n  minTotalValueGain: number\n  minFinalValue: number\n  mustSurvive: boolean\n}\n\nconst DEFAULT_SUCCESS_CRITERIA: SuccessCriteria = {\n  minTrips: 3,\n  minTotalValueGain: 500,\n  minFinalValue: 1000,\n  mustSurvive: false // Even dead rats can have successful paths up to a point\n}\n\n/**\n * Filter for successful journeys based on criteria\n */\nexport function filterSuccessfulJourneys(\n  journeys: RatJourney[],\n  criteria: Partial<SuccessCriteria> = {}\n): RatJourney[] {\n  const c = { ...DEFAULT_SUCCESS_CRITERIA, ...criteria }\n\n  return journeys.filter(journey => {\n    if (journey.totalTrips < c.minTrips) return false\n    if (journey.totalValueGained < c.minTotalValueGain) return false\n    if (journey.peakValue < c.minFinalValue) return false\n    if (c.mustSurvive && !journey.survived) return false\n    return true\n  })\n}\n\n// =============================================================================\n// PATH PATTERN EXTRACTION\n// =============================================================================\n\n/**\n * Extract common path patterns from successful journeys\n */\nexport function extractPathPatterns(\n  journeys: RatJourney[],\n  minOccurrences: number = 3,\n  maxPatternLength: number = 5\n): PathPattern[] {\n  const patterns: PathPattern[] = []\n\n  // Extract subsequences of various lengths\n  for (let length = 2; length <= maxPatternLength; length++) {\n    const subsequenceCounts = new Map<\n      string,\n      {\n        tripSequence: string[]\n        journeys: RatJourney[]\n        totalValueGains: number[]\n        completionCount: number\n      }\n    >()\n\n    for (const journey of journeys) {\n      // Extract all subsequences of this length from the journey\n      for (let start = 0; start <= journey.steps.length - length; start++) {\n        const subsequence = journey.steps.slice(start, start + length)\n        const tripIds = subsequence.map(s => s.tripId)\n        const key = tripIds.join(\"->\")\n\n        // Calculate value gain for this subsequence\n        const valueGain = subsequence.reduce((sum, s) => sum + s.valueChange, 0)\n\n        // Check if the rat completed this subsequence (survived through it)\n        const completed = subsequence.every((s, i) => i === subsequence.length - 1 || s.survived)\n\n        const existing = subsequenceCounts.get(key) || {\n          tripSequence: tripIds,\n          journeys: [],\n          totalValueGains: [],\n          completionCount: 0\n        }\n        existing.journeys.push(journey)\n        existing.totalValueGains.push(valueGain)\n        if (completed) existing.completionCount++\n        subsequenceCounts.set(key, existing)\n      }\n    }\n\n    // Convert to patterns\n    for (const [, data] of subsequenceCounts) {\n      if (data.journeys.length < minOccurrences) continue\n\n      const avgTotalValueGain =\n        data.totalValueGains.reduce((a, b) => a + b, 0) / data.totalValueGains.length\n      const completionRate = data.completionCount / data.journeys.length\n\n      // Find key items for this pattern\n      const keyItems = findKeyItemsForPattern(data.journeys, data.tripSequence)\n\n      // Find optimal entry value range\n      const entryValues = data.journeys.map(j => {\n        const startStep = j.steps.find(s => s.tripId === data.tripSequence[0])\n        return startStep?.valueBefore || 0\n      })\n      const optimalRange = findOptimalValueRange(entryValues, data.totalValueGains)\n\n      patterns.push({\n        tripSequence: data.tripSequence,\n        occurrences: data.journeys.length,\n        avgTotalValueGain,\n        completionRate,\n        keyItems,\n        optimalEntryValueRange: optimalRange\n      })\n    }\n  }\n\n  // Sort by a combination of occurrence frequency and value gain\n  return patterns\n    .filter(p => p.completionRate > 0.3) // At least 30% completion rate\n    .sort((a, b) => {\n      const scoreA = a.avgTotalValueGain * a.completionRate * Math.log(a.occurrences + 1)\n      const scoreB = b.avgTotalValueGain * b.completionRate * Math.log(b.occurrences + 1)\n      return scoreB - scoreA\n    })\n    .slice(0, 50) // Keep top 50 patterns\n}\n\n/**\n * Find items that were commonly present during successful execution of a pattern\n */\nfunction findKeyItemsForPattern(\n  journeys: RatJourney[],\n  tripSequence: string[]\n): PathPattern[\"keyItems\"] {\n  // Track item presence at each step\n  const itemAtStep = new Map<string, Map<number, number>>() // itemName -> step -> count\n\n  for (const journey of journeys) {\n    // Find where this pattern occurs in the journey\n    const patternStart = findPatternStart(journey.steps, tripSequence)\n    if (patternStart === -1) continue\n\n    // Track items at each step of the pattern\n    for (let i = 0; i < tripSequence.length; i++) {\n      const step = journey.steps[patternStart + i]\n      if (!step) continue\n\n      for (const item of step.itemsOnEntrance) {\n        if (!item.name) continue\n        const itemSteps = itemAtStep.get(item.name) || new Map()\n        itemSteps.set(i, (itemSteps.get(i) || 0) + 1)\n        itemAtStep.set(item.name, itemSteps)\n      }\n    }\n  }\n\n  // Find items that appear frequently at specific steps\n  const keyItems: PathPattern[\"keyItems\"] = []\n\n  for (const [itemName, stepCounts] of itemAtStep) {\n    // Find the step where this item is most important\n    let maxStep = 0\n    let maxCount = 0\n    for (const [step, count] of stepCounts) {\n      if (count > maxCount) {\n        maxCount = count\n        maxStep = step\n      }\n    }\n\n    const frequency = maxCount / journeys.length\n    if (frequency > 0.3) {\n      // Item present in 30%+ of journeys at this step\n      keyItems.push({\n        itemName,\n        acquiredAtStep: maxStep,\n        importanceScore: frequency\n      })\n    }\n  }\n\n  return keyItems\n    .sort((a, b) => b.importanceScore - a.importanceScore)\n    .slice(0, 5) // Top 5 key items\n}\n\nfunction findPatternStart(steps: JourneyStep[], tripSequence: string[]): number {\n  for (let i = 0; i <= steps.length - tripSequence.length; i++) {\n    let matches = true\n    for (let j = 0; j < tripSequence.length; j++) {\n      if (steps[i + j].tripId !== tripSequence[j]) {\n        matches = false\n        break\n      }\n    }\n    if (matches) return i\n  }\n  return -1\n}\n\n/**\n * Find the optimal entry value range for a pattern\n */\nfunction findOptimalValueRange(\n  entryValues: number[],\n  valueGains: number[]\n): { min: number; max: number } {\n  if (entryValues.length === 0) {\n    return { min: 0, max: Infinity }\n  }\n\n  // Pair entry values with outcomes and sort\n  const pairs = entryValues.map((v, i) => ({ entry: v, gain: valueGains[i] }))\n  pairs.sort((a, b) => a.entry - b.entry)\n\n  // Find the range with best average outcome\n  // Use a sliding window approach\n  const windowSize = Math.max(3, Math.floor(pairs.length / 3))\n  let bestAvg = -Infinity\n  let bestMin = 0\n  let bestMax = Infinity\n\n  for (let i = 0; i <= pairs.length - windowSize; i++) {\n    const window = pairs.slice(i, i + windowSize)\n    const avgGain = window.reduce((sum, p) => sum + p.gain, 0) / windowSize\n\n    if (avgGain > bestAvg) {\n      bestAvg = avgGain\n      bestMin = window[0].entry\n      bestMax = window[window.length - 1].entry\n    }\n  }\n\n  // Add some padding to the range\n  const range = bestMax - bestMin\n  return {\n    min: Math.max(0, bestMin - range * 0.1),\n    max: bestMax + range * 0.1\n  }\n}\n\n// =============================================================================\n// ITEM ACQUISITION CHAINS\n// =============================================================================\n\nexport interface ItemChain {\n  items: string[] // Sequence of items acquired\n  trips: string[] // Trips where they were acquired\n  frequency: number\n  avgFinalValue: number\n}\n\n/**\n * Find common item acquisition chains that lead to success\n */\nexport function findItemAcquisitionChains(\n  journeys: RatJourney[],\n  minOccurrences: number = 3\n): ItemChain[] {\n  const chainCounts = new Map<\n    string,\n    {\n      items: string[]\n      trips: string[]\n      count: number\n      finalValues: number[]\n    }\n  >()\n\n  for (const journey of journeys) {\n    // Build the item chain for this journey\n    const itemSequence: Array<{ item: string; trip: string }> = []\n\n    for (const step of journey.steps) {\n      for (const item of step.itemsGained) {\n        if (item.name) {\n          itemSequence.push({ item: item.name, trip: step.tripId })\n        }\n      }\n    }\n\n    // Extract subsequences of the item chain\n    for (let length = 2; length <= Math.min(5, itemSequence.length); length++) {\n      for (let start = 0; start <= itemSequence.length - length; start++) {\n        const subseq = itemSequence.slice(start, start + length)\n        const key = subseq.map(s => s.item).join(\"->\")\n\n        const existing = chainCounts.get(key) || {\n          items: subseq.map(s => s.item),\n          trips: subseq.map(s => s.trip),\n          count: 0,\n          finalValues: []\n        }\n        existing.count++\n        existing.finalValues.push(journey.peakValue)\n        chainCounts.set(key, existing)\n      }\n    }\n  }\n\n  const chains: ItemChain[] = []\n\n  for (const [, data] of chainCounts) {\n    if (data.count < minOccurrences) continue\n\n    chains.push({\n      items: data.items,\n      trips: data.trips,\n      frequency: data.count / journeys.length,\n      avgFinalValue: data.finalValues.reduce((a, b) => a + b, 0) / data.finalValues.length\n    })\n  }\n\n  return chains\n    .sort((a, b) => b.avgFinalValue * b.frequency - a.avgFinalValue * a.frequency)\n    .slice(0, 30)\n}\n\n// =============================================================================\n// JOURNEY SIMILARITY\n// =============================================================================\n\n/**\n * Find journeys similar to the current rat's path\n * Useful for predicting what trips to take next based on similar successful rats\n */\nexport function findSimilarJourneys(\n  currentPath: string[], // Trip IDs taken so far\n  currentItems: string[], // Items currently held\n  journeys: RatJourney[],\n  topN: number = 10\n): Array<{ journey: RatJourney; similarity: number; nextTrips: string[] }> {\n  const results: Array<{ journey: RatJourney; similarity: number; nextTrips: string[] }> = []\n\n  for (const journey of journeys) {\n    // Calculate path similarity\n    const journeyTripIds = journey.steps.map(s => s.tripId)\n    const pathSimilarity = calculateSequenceSimilarity(currentPath, journeyTripIds)\n\n    // Calculate item similarity at the matching point\n    const matchPoint = findBestMatchPoint(currentPath, journeyTripIds)\n    if (matchPoint === -1) continue\n\n    const itemsAtMatchPoint = journey.steps[matchPoint]?.itemsOnEntrance.map(i => i.name) || []\n    const itemSimilarity = calculateSetSimilarity(currentItems, itemsAtMatchPoint)\n\n    // Combined similarity\n    const similarity = pathSimilarity * 0.6 + itemSimilarity * 0.4\n\n    // Get next trips from this journey\n    const nextTrips = journeyTripIds.slice(matchPoint + 1, matchPoint + 4) // Next 3 trips\n\n    if (nextTrips.length > 0 && similarity > 0.3) {\n      results.push({ journey, similarity, nextTrips })\n    }\n  }\n\n  return results.sort((a, b) => b.similarity - a.similarity).slice(0, topN)\n}\n\nfunction calculateSequenceSimilarity(seq1: string[], seq2: string[]): number {\n  if (seq1.length === 0 || seq2.length === 0) return 0\n\n  // Find longest common subsequence length\n  const m = seq1.length\n  const n = seq2.length\n  const dp: number[][] = Array(m + 1)\n    .fill(null)\n    .map(() => Array(n + 1).fill(0))\n\n  for (let i = 1; i <= m; i++) {\n    for (let j = 1; j <= n; j++) {\n      if (seq1[i - 1] === seq2[j - 1]) {\n        dp[i][j] = dp[i - 1][j - 1] + 1\n      } else {\n        dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1])\n      }\n    }\n  }\n\n  const lcsLength = dp[m][n]\n  return (2 * lcsLength) / (m + n)\n}\n\nfunction calculateSetSimilarity(set1: string[], set2: string[]): number {\n  if (set1.length === 0 && set2.length === 0) return 1\n  if (set1.length === 0 || set2.length === 0) return 0\n\n  const s1 = new Set(set1)\n  const s2 = new Set(set2)\n\n  let intersection = 0\n  for (const item of s1) {\n    if (s2.has(item)) intersection++\n  }\n\n  const union = new Set([...set1, ...set2]).size\n  return intersection / union // Jaccard similarity\n}\n\nfunction findBestMatchPoint(currentPath: string[], journeyPath: string[]): number {\n  // Find where current path best aligns with journey path\n  // Return the index in journey path that corresponds to current position\n\n  if (currentPath.length === 0) return -1\n\n  let bestMatch = -1\n  let bestScore = 0\n\n  for (let i = 0; i < journeyPath.length; i++) {\n    // Check how many of the last N trips match\n    let matchScore = 0\n    for (let j = 0; j < currentPath.length && i - j >= 0; j++) {\n      if (journeyPath[i - j] === currentPath[currentPath.length - 1 - j]) {\n        matchScore++\n      }\n    }\n\n    if (matchScore > bestScore) {\n      bestScore = matchScore\n      bestMatch = i\n    }\n  }\n\n  return bestMatch\n}\n\n","/**\n * ========================================\n * Graph Builder & Cache\n * ========================================\n *\n * Constructs and maintains the in-memory trip graph:\n * - Initial build from CMS data\n * - Incremental updates on new outcomes\n * - Trip addition/removal handling\n * - Edge computation for pathfinding\n */\n\nimport type {\n  TripGraph,\n  TripNode,\n  TripEdge,\n  ExtendedOutcome\n} from \"./types\"\nimport type { Trip } from \"../../../types\"\nimport { calculateTripStatistics, updateStatisticsWithOutcome } from \"./statistics\"\nimport {\n  reconstructJourneys,\n  filterSuccessfulJourneys,\n  extractPathPatterns\n} from \"./path-reconstruction\"\nimport { sanityClient } from \"../../cms\"\n\n// =============================================================================\n// CMS DATA FETCHING\n// =============================================================================\n\n/**\n * Fetch all outcomes for trips with extended data\n */\nasync function fetchExtendedOutcomes(\n  tripIds: string[],\n  worldAddress: string\n): Promise<ExtendedOutcome[]> {\n  if (tripIds.length === 0) return []\n\n  // Query with all fields we need for graph building\n  const query = `*[_type == \"outcome\" && tripId in $tripIds && worldAddress == $worldAddress] {\n    _id,\n    _createdAt,\n    tripId,\n    tripIndex,\n    ratId,\n    ratName,\n    playerId,\n    playerName,\n    ratValueChange,\n    ratValue,\n    oldRatValue,\n    newRatBalance,\n    oldRatBalance,\n    inventoryOnEntrance[] {\n      \"id\": id,\n      \"name\": name,\n      \"value\": value\n    },\n    itemChanges[] {\n      \"name\": name,\n      \"type\": type,\n      \"value\": value,\n      \"id\": id\n    },\n    itemsLostOnDeath[] {\n      \"id\": id,\n      \"name\": name,\n      \"value\": value\n    }\n  }`\n\n  const outcomes = await sanityClient.fetch<ExtendedOutcome[]>(query, { tripIds, worldAddress })\n\n  // Mark died/survived\n  return outcomes.map(o => ({\n    ...o,\n    died: o.newRatBalance === 0 && (o.oldRatBalance ?? 0) > 0,\n    survived: !(o.newRatBalance === 0 && (o.oldRatBalance ?? 0) > 0)\n  }))\n}\n\n/**\n * Fetch ALL outcomes for a world (for journey reconstruction)\n */\nasync function fetchAllOutcomes(worldAddress: string): Promise<ExtendedOutcome[]> {\n  const query = `*[_type == \"outcome\" && worldAddress == $worldAddress] | order(_createdAt asc) {\n    _id,\n    _createdAt,\n    tripId,\n    tripIndex,\n    ratId,\n    ratName,\n    playerId,\n    playerName,\n    ratValueChange,\n    ratValue,\n    oldRatValue,\n    newRatBalance,\n    oldRatBalance,\n    inventoryOnEntrance[] {\n      \"id\": id,\n      \"name\": name,\n      \"value\": value\n    },\n    itemChanges[] {\n      \"name\": name,\n      \"type\": type,\n      \"value\": value,\n      \"id\": id\n    },\n    itemsLostOnDeath[] {\n      \"id\": id,\n      \"name\": name,\n      \"value\": value\n    }\n  }`\n\n  const outcomes = await sanityClient.fetch<ExtendedOutcome[]>(query, { worldAddress })\n\n  return outcomes.map(o => ({\n    ...o,\n    died: o.newRatBalance === 0 && (o.oldRatBalance ?? 0) > 0,\n    survived: !(o.newRatBalance === 0 && (o.oldRatBalance ?? 0) > 0)\n  }))\n}\n\n// =============================================================================\n// GRAPH BUILDER CLASS\n// =============================================================================\n\nexport class TripGraphBuilder {\n  private graph: TripGraph\n  private initialized: boolean = false\n\n  constructor(worldAddress: string, minRatValueToEnterPercent: number = 30) {\n    this.graph = {\n      worldAddress,\n      nodes: new Map(),\n      edges: new Map(),\n      successfulJourneys: [],\n      pathPatterns: [],\n      lastFullRebuild: new Date(),\n      outcomeCount: 0,\n      minRatValueToEnterPercent\n    }\n  }\n\n  /**\n   * Get the current graph state\n   */\n  getGraph(): TripGraph {\n    return this.graph\n  }\n\n  /**\n   * Check if graph is initialized\n   */\n  isInitialized(): boolean {\n    return this.initialized\n  }\n\n  /**\n   * Initialize the graph from CMS data\n   */\n  async initialize(trips: Trip[]): Promise<void> {\n    console.log(`[GraphBuilder] Initializing graph with ${trips.length} trips...`)\n\n    // Fetch all outcomes for this world\n    console.log(`[GraphBuilder] Fetching all outcomes from CMS...`)\n    const allOutcomes = await fetchAllOutcomes(this.graph.worldAddress)\n    console.log(`[GraphBuilder] Fetched ${allOutcomes.length} outcomes`)\n\n    this.graph.outcomeCount = allOutcomes.length\n\n    // Group outcomes by trip\n    const outcomesByTrip = new Map<string, ExtendedOutcome[]>()\n    for (const outcome of allOutcomes) {\n      const existing = outcomesByTrip.get(outcome.tripId) || []\n      existing.push(outcome)\n      outcomesByTrip.set(outcome.tripId, existing)\n    }\n\n    // Build nodes for each trip\n    console.log(`[GraphBuilder] Building trip nodes...`)\n    for (const trip of trips) {\n      const tripOutcomes = outcomesByTrip.get(trip.id) || []\n      const stats = calculateTripStatistics(trip, tripOutcomes, allOutcomes)\n\n      const minEntryValue = Math.floor(\n        (trip.tripCreationCost * this.graph.minRatValueToEnterPercent) / 100\n      )\n\n      const node: TripNode = {\n        tripId: trip.id,\n        trip,\n        stats,\n        minEntryValue,\n        active: trip.balance > 0\n      }\n\n      this.graph.nodes.set(trip.id, node)\n    }\n\n    // Reconstruct journeys and extract patterns\n    console.log(`[GraphBuilder] Reconstructing rat journeys...`)\n    const journeys = reconstructJourneys(allOutcomes)\n    console.log(`[GraphBuilder] Found ${journeys.length} rat journeys`)\n\n    // Filter for successful journeys\n    const successfulJourneys = filterSuccessfulJourneys(journeys, {\n      minTrips: 3,\n      minTotalValueGain: 300,\n      minFinalValue: 500\n    })\n    console.log(`[GraphBuilder] Found ${successfulJourneys.length} successful journeys`)\n\n    this.graph.successfulJourneys = successfulJourneys\n\n    // Extract path patterns\n    console.log(`[GraphBuilder] Extracting path patterns...`)\n    const patterns = extractPathPatterns(successfulJourneys, 2)\n    console.log(`[GraphBuilder] Found ${patterns.length} path patterns`)\n\n    this.graph.pathPatterns = patterns\n\n    // Compute edges between trips\n    console.log(`[GraphBuilder] Computing trip edges...`)\n    this.computeEdges(allOutcomes)\n\n    this.graph.lastFullRebuild = new Date()\n    this.initialized = true\n\n    console.log(`[GraphBuilder] Graph initialization complete`)\n    this.logGraphStats()\n  }\n\n  /**\n   * Compute edges between trips based on historical transitions\n   */\n  private computeEdges(allOutcomes: ExtendedOutcome[]): void {\n    // Group outcomes by rat to find transitions\n    const outcomesByRat = new Map<string, ExtendedOutcome[]>()\n    for (const outcome of allOutcomes) {\n      const existing = outcomesByRat.get(outcome.ratId) || []\n      existing.push(outcome)\n      outcomesByRat.set(outcome.ratId, existing)\n    }\n\n    // Track transitions\n    const transitions = new Map<\n      string,\n      {\n        fromTripId: string\n        toTripId: string\n        count: number\n        survivedCount: number\n        valueGains: number[]\n      }\n    >()\n\n    for (const outcomes of outcomesByRat.values()) {\n      // Sort by time\n      const sorted = [...outcomes].sort(\n        (a, b) => new Date(a._createdAt).getTime() - new Date(b._createdAt).getTime()\n      )\n\n      for (let i = 0; i < sorted.length - 1; i++) {\n        const from = sorted[i]\n        const to = sorted[i + 1]\n\n        // Only count if rat survived the first trip\n        if (!from.survived) continue\n\n        const key = `${from.tripId}->${to.tripId}`\n        const existing = transitions.get(key) || {\n          fromTripId: from.tripId,\n          toTripId: to.tripId,\n          count: 0,\n          survivedCount: 0,\n          valueGains: []\n        }\n\n        existing.count++\n        if (to.survived) existing.survivedCount++\n        existing.valueGains.push(to.ratValueChange)\n        transitions.set(key, existing)\n      }\n    }\n\n    // Convert to edges\n    for (const [, data] of transitions) {\n      if (data.count < 2) continue // Need at least 2 occurrences\n\n      const avgValueGain =\n        data.valueGains.reduce((a, b) => a + b, 0) / data.valueGains.length\n      const successRate = data.survivedCount / data.count\n\n      // Find beneficial items for this transition\n      const beneficialItems = this.findBeneficialItemsForTransition(\n        data.fromTripId,\n        data.toTripId,\n        allOutcomes\n      )\n\n      const edge: TripEdge = {\n        fromTripId: data.fromTripId,\n        toTripId: data.toTripId,\n        accessibilityProbability: successRate, // Simplified - real value depends on rat value\n        expectedValueGain: avgValueGain,\n        beneficialItems,\n        transitionSuccessRate: successRate,\n        transitionCount: data.count\n      }\n\n      const existing = this.graph.edges.get(data.fromTripId) || []\n      existing.push(edge)\n      this.graph.edges.set(data.fromTripId, existing)\n    }\n  }\n\n  /**\n   * Find items that improve outcomes when transitioning between two trips\n   */\n  private findBeneficialItemsForTransition(\n    fromTripId: string,\n    toTripId: string,\n    allOutcomes: ExtendedOutcome[]\n  ): string[] {\n    // Find rats that made this transition\n    const outcomesByRat = new Map<string, ExtendedOutcome[]>()\n    for (const outcome of allOutcomes) {\n      const existing = outcomesByRat.get(outcome.ratId) || []\n      existing.push(outcome)\n      outcomesByRat.set(outcome.ratId, existing)\n    }\n\n    const transitionOutcomes: {\n      itemsOnEntrance: string[]\n      valueChange: number\n      survived: boolean\n    }[] = []\n\n    for (const outcomes of outcomesByRat.values()) {\n      const sorted = [...outcomes].sort(\n        (a, b) => new Date(a._createdAt).getTime() - new Date(b._createdAt).getTime()\n      )\n\n      for (let i = 0; i < sorted.length - 1; i++) {\n        if (sorted[i].tripId === fromTripId && sorted[i + 1].tripId === toTripId) {\n          transitionOutcomes.push({\n            itemsOnEntrance: (sorted[i + 1].inventoryOnEntrance || [])\n              .map(item => item.name)\n              .filter(Boolean) as string[],\n            valueChange: sorted[i + 1].ratValueChange,\n            survived: sorted[i + 1].survived\n          })\n        }\n      }\n    }\n\n    if (transitionOutcomes.length < 3) return []\n\n    // Find items that correlate with better outcomes\n    const itemImpact = new Map<string, { withItem: number[]; withoutItem: number[] }>()\n\n    // Collect all items\n    const allItems = new Set<string>()\n    for (const t of transitionOutcomes) {\n      for (const item of t.itemsOnEntrance) {\n        allItems.add(item)\n      }\n    }\n\n    // Calculate impact for each item\n    for (const item of allItems) {\n      const withItem = transitionOutcomes\n        .filter(t => t.itemsOnEntrance.includes(item))\n        .map(t => t.valueChange)\n      const withoutItem = transitionOutcomes\n        .filter(t => !t.itemsOnEntrance.includes(item))\n        .map(t => t.valueChange)\n\n      if (withItem.length >= 2 && withoutItem.length >= 2) {\n        itemImpact.set(item, { withItem, withoutItem })\n      }\n    }\n\n    // Find beneficial items\n    const beneficial: string[] = []\n    for (const [item, impact] of itemImpact) {\n      const avgWith =\n        impact.withItem.reduce((a, b) => a + b, 0) / impact.withItem.length\n      const avgWithout =\n        impact.withoutItem.reduce((a, b) => a + b, 0) / impact.withoutItem.length\n\n      if (avgWith > avgWithout + 50) {\n        // Significant improvement\n        beneficial.push(item)\n      }\n    }\n\n    return beneficial.slice(0, 3) // Top 3\n  }\n\n  /**\n   * Update the graph with a new outcome (incremental update)\n   */\n  updateWithOutcome(tripId: string, outcome: ExtendedOutcome): void {\n    const node = this.graph.nodes.get(tripId)\n    if (!node) {\n      console.log(`[GraphBuilder] Trip ${tripId} not in graph, skipping update`)\n      return\n    }\n\n    // Update statistics\n    node.stats = updateStatisticsWithOutcome(node.stats, outcome)\n    this.graph.outcomeCount++\n\n    // Note: For full accuracy, we should periodically rebuild\n    // edges and patterns, but incremental stat updates are sufficient\n    // for trip selection decisions\n  }\n\n  /**\n   * Mark a trip as depleted (balance = 0)\n   */\n  markTripDepleted(tripId: string): void {\n    const node = this.graph.nodes.get(tripId)\n    if (node) {\n      node.active = false\n      console.log(`[GraphBuilder] Marked trip ${tripId} as depleted`)\n    }\n  }\n\n  /**\n   * Add a new trip to the graph\n   */\n  async addTrip(trip: Trip): Promise<void> {\n    // Fetch outcomes for this trip\n    const outcomes = await fetchExtendedOutcomes([trip.id], this.graph.worldAddress)\n    const allOutcomes = await fetchAllOutcomes(this.graph.worldAddress)\n\n    const stats = calculateTripStatistics(trip, outcomes, allOutcomes)\n    const minEntryValue = Math.floor(\n      (trip.tripCreationCost * this.graph.minRatValueToEnterPercent) / 100\n    )\n\n    const node: TripNode = {\n      tripId: trip.id,\n      trip,\n      stats,\n      minEntryValue,\n      active: trip.balance > 0\n    }\n\n    this.graph.nodes.set(trip.id, node)\n    console.log(`[GraphBuilder] Added new trip ${trip.id}`)\n  }\n\n  /**\n   * Update trip data (e.g., new balance)\n   */\n  updateTrip(trip: Trip): void {\n    const node = this.graph.nodes.get(trip.id)\n    if (node) {\n      node.trip = trip\n      node.active = trip.balance > 0\n      node.minEntryValue = Math.floor(\n        (trip.tripCreationCost * this.graph.minRatValueToEnterPercent) / 100\n      )\n    }\n  }\n\n  /**\n   * Get edges from a trip\n   */\n  getEdgesFrom(tripId: string): TripEdge[] {\n    return this.graph.edges.get(tripId) || []\n  }\n\n  /**\n   * Get active trips that a rat can enter\n   */\n  getAccessibleTrips(ratValue: number): TripNode[] {\n    const accessible: TripNode[] = []\n\n    for (const node of this.graph.nodes.values()) {\n      if (node.active && ratValue >= node.minEntryValue) {\n        accessible.push(node)\n      }\n    }\n\n    return accessible\n  }\n\n  /**\n   * Full rebuild of the graph (call periodically for accuracy)\n   */\n  async rebuild(trips: Trip[]): Promise<void> {\n    console.log(`[GraphBuilder] Performing full graph rebuild...`)\n    this.initialized = false\n    this.graph.nodes.clear()\n    this.graph.edges.clear()\n    await this.initialize(trips)\n  }\n\n  /**\n   * Log graph statistics\n   */\n  private logGraphStats(): void {\n    const activeNodes = Array.from(this.graph.nodes.values()).filter(n => n.active).length\n    const totalEdges = Array.from(this.graph.edges.values()).reduce(\n      (sum, edges) => sum + edges.length,\n      0\n    )\n\n    console.log(`[GraphBuilder] Graph stats:`)\n    console.log(`  - Total trips: ${this.graph.nodes.size}`)\n    console.log(`  - Active trips: ${activeNodes}`)\n    console.log(`  - Total edges: ${totalEdges}`)\n    console.log(`  - Outcomes: ${this.graph.outcomeCount}`)\n    console.log(`  - Successful journeys: ${this.graph.successfulJourneys.length}`)\n    console.log(`  - Path patterns: ${this.graph.pathPatterns.length}`)\n  }\n}\n\n// =============================================================================\n// SINGLETON INSTANCE\n// =============================================================================\n\nlet graphInstance: TripGraphBuilder | null = null\n\n/**\n * Get or create the graph builder instance\n */\nexport function getGraphBuilder(\n  worldAddress: string,\n  minRatValueToEnterPercent: number = 30\n): TripGraphBuilder {\n  if (!graphInstance || graphInstance.getGraph().worldAddress !== worldAddress) {\n    graphInstance = new TripGraphBuilder(worldAddress, minRatValueToEnterPercent)\n  }\n  return graphInstance\n}\n\n/**\n * Reset the graph builder (for testing or world change)\n */\nexport function resetGraphBuilder(): void {\n  graphInstance = null\n}\n\n","/**\n * ========================================\n * Graph-Based Trip Selection Strategy\n * ========================================\n *\n * Simple approach: find the most profitable rat journeys and copy them.\n *\n * The graph is built once on startup from Sanity CMS data and updated\n * incrementally as new outcomes are recorded.\n */\n\nimport type { Trip, TripSelectionResult } from \"../../../types\"\nimport type { ExtendedOutcome } from \"./types\"\nimport { TripGraphBuilder, getGraphBuilder } from \"./graph-builder\"\n\n// =============================================================================\n// GRAPH INSTANCE MANAGEMENT\n// =============================================================================\n\nlet graphBuilder: TripGraphBuilder | null = null\nlet graphInitPromise: Promise<void> | null = null\n\n/**\n * Initialize or get the graph builder\n */\nexport async function initializeGraph(\n  worldAddress: string,\n  trips: Trip[],\n  minRatValueToEnterPercent: number = 30\n): Promise<TripGraphBuilder> {\n  // Check if we already have an initialized graph for this world\n  if (graphBuilder && graphBuilder.getGraph().worldAddress === worldAddress && graphBuilder.isInitialized()) {\n    return graphBuilder\n  }\n\n  // Check if initialization is already in progress\n  if (graphInitPromise) {\n    await graphInitPromise\n    if (graphBuilder) return graphBuilder\n  }\n\n  // Create new graph builder\n  graphBuilder = getGraphBuilder(worldAddress, minRatValueToEnterPercent)\n\n  // Initialize asynchronously\n  graphInitPromise = graphBuilder.initialize(trips)\n  await graphInitPromise\n  graphInitPromise = null\n\n  return graphBuilder\n}\n\n/**\n * Get the current graph builder (must be initialized first)\n */\nexport function getGraph(): TripGraphBuilder | null {\n  return graphBuilder\n}\n\n/**\n * Update graph with a new outcome\n */\nexport function updateGraphWithOutcome(tripId: string, outcome: ExtendedOutcome): void {\n  if (graphBuilder) {\n    graphBuilder.updateWithOutcome(tripId, outcome)\n  }\n}\n\n/**\n * Mark a trip as depleted in the graph\n */\nexport function markTripDepleted(tripId: string): void {\n  if (graphBuilder) {\n    graphBuilder.markTripDepleted(tripId)\n  }\n}\n\n/**\n * Add a new trip to the graph\n */\nexport async function addTripToGraph(trip: Trip): Promise<void> {\n  if (graphBuilder) {\n    await graphBuilder.addTrip(trip)\n  }\n}\n\n/**\n * Rebuild the graph (call periodically for accuracy)\n */\nexport async function rebuildGraph(trips: Trip[]): Promise<void> {\n  if (graphBuilder) {\n    await graphBuilder.rebuild(trips)\n  }\n}\n\n// =============================================================================\n// MAIN SELECTION FUNCTION\n// =============================================================================\n\nexport interface GraphSelectionOptions {\n  trips: Trip[]\n  rat: Rat\n  ratTotalValue: number\n  worldAddress: string\n  minRatValueToEnterPercent?: number\n  config?: Partial<GraphStrategyConfig>\n  currentPath?: string[] // Trip IDs the rat has already taken this session\n  inventory?: string[] // Item names the rat currently has\n}\n\n/**\n * Select the best trip using the graph-based strategy\n * Simple approach: copy the most profitable rat journey\n */\nexport async function selectTripWithGraph(\n  options: GraphSelectionOptions\n): Promise<TripSelectionResult | null> {\n  const {\n    trips,\n    ratTotalValue,\n    worldAddress,\n    minRatValueToEnterPercent = 30,\n    currentPath = []\n  } = options\n\n  console.log(`[Graph] Starting trip selection (rat value: ${ratTotalValue}, trips available: ${trips.length})`)\n\n  if (trips.length === 0) {\n    return null\n  }\n\n  // Build set of available trip IDs for quick lookup\n  const availableTripIds = new Set(trips.map(t => t.id))\n\n  // Ensure graph is initialized\n  console.log(`[Graph] Ensuring graph is initialized...`)\n  const builder = await initializeGraph(worldAddress, trips, minRatValueToEnterPercent)\n  const graph = builder.getGraph()\n\n  // Get all journeys sorted by profitability (peak value achieved)\n  const journeys = [...graph.successfulJourneys].sort((a, b) => b.peakValue - a.peakValue)\n\n  console.log(`[Graph] Found ${journeys.length} profitable journeys to learn from`)\n\n  if (journeys.length === 0) {\n    // Fallback: pick trip with highest balance\n    console.log(`[Graph] No journeys found, falling back to highest balance trip`)\n    const sorted = [...trips].sort((a, b) => b.balance - a.balance)\n    return {\n      trip: sorted[0],\n      explanation: \"Fallback: highest balance trip (no journey data)\"\n    }\n  }\n\n  // Log top 3 most profitable journeys\n  console.log(`[Graph] Top profitable journeys:`)\n  for (let i = 0; i < Math.min(3, journeys.length); i++) {\n    const j = journeys[i]\n    console.log(`[Graph]   ${i + 1}. ${j.ratName} - peak: ${j.peakValue}, trips: ${j.totalTrips}, gain: ${j.totalValueGained}`)\n  }\n\n  // Current step in journey (how many trips we've taken)\n  const currentStep = currentPath.length\n  console.log(`[Graph] Current step: ${currentStep} (path: ${currentPath.length > 0 ? currentPath.map(id => id.slice(0, 8)).join(\" -> \") : \"start\"})`)\n\n  // Try to find a journey we can follow\n  for (const journey of journeys) {\n    const journeyTripIds = journey.steps.map(s => s.tripId)\n\n    // If we haven't taken any trips yet, try to start this journey\n    if (currentStep === 0) {\n      const firstTripId = journeyTripIds[0]\n      if (availableTripIds.has(firstTripId)) {\n        const trip = trips.find(t => t.id === firstTripId)!\n        console.log(`[Graph] Following journey of \"${journey.ratName}\" (peak: ${journey.peakValue})`)\n        console.log(`[Graph] Journey path: ${journeyTripIds.map(id => id.slice(0, 8)).join(\" -> \")}`)\n        console.log(`[Graph] Starting with trip 1/${journeyTripIds.length}`)\n        return {\n          trip,\n          explanation: `Following ${journey.ratName}'s journey (peak: ${journey.peakValue}) - step 1/${journeyTripIds.length}`\n        }\n      }\n      continue\n    }\n\n    // Check if our current path matches this journey's prefix\n    let matchesPrefix = true\n    for (let i = 0; i < currentPath.length && i < journeyTripIds.length; i++) {\n      if (currentPath[i] !== journeyTripIds[i]) {\n        matchesPrefix = false\n        break\n      }\n    }\n\n    if (matchesPrefix && currentStep < journeyTripIds.length) {\n      // We're following this journey! Get the next trip\n      const nextTripId = journeyTripIds[currentStep]\n      if (availableTripIds.has(nextTripId)) {\n        const trip = trips.find(t => t.id === nextTripId)!\n        console.log(`[Graph] Continuing journey of \"${journey.ratName}\" (peak: ${journey.peakValue})`)\n        console.log(`[Graph] Next trip: step ${currentStep + 1}/${journeyTripIds.length}`)\n        return {\n          trip,\n          explanation: `Following ${journey.ratName}'s journey (peak: ${journey.peakValue}) - step ${currentStep + 1}/${journeyTripIds.length}`\n        }\n      }\n    }\n  }\n\n  // No exact journey match - find any journey with an available next trip\n  console.log(`[Graph] No exact journey match, looking for any profitable trip...`)\n\n  // Collect all trips from profitable journeys and score by position\n  const tripScores = new Map<string, { score: number; journeyPeak: number; journeyName: string }>()\n\n  for (const journey of journeys) {\n    for (let i = 0; i < journey.steps.length; i++) {\n      const tripId = journey.steps[i].tripId\n      if (!availableTripIds.has(tripId)) continue\n\n      // Score: earlier steps in more profitable journeys are better\n      const positionBonus = (journey.steps.length - i) / journey.steps.length\n      const score = journey.peakValue * positionBonus\n\n      const existing = tripScores.get(tripId)\n      if (!existing || score > existing.score) {\n        tripScores.set(tripId, { score, journeyPeak: journey.peakValue, journeyName: journey.ratName })\n      }\n    }\n  }\n\n  // Pick the best scored trip\n  let bestTripId: string | null = null\n  let bestScore = -Infinity\n  let bestData: { journeyPeak: number; journeyName: string } | null = null\n\n  for (const [tripId, data] of tripScores) {\n    if (data.score > bestScore) {\n      bestScore = data.score\n      bestTripId = tripId\n      bestData = data\n    }\n  }\n\n  if (bestTripId && bestData) {\n    const trip = trips.find(t => t.id === bestTripId)!\n    console.log(`[Graph] Selected trip from ${bestData.journeyName}'s journey (peak: ${bestData.journeyPeak})`)\n    return {\n      trip,\n      explanation: `Trip from ${bestData.journeyName}'s journey (peak: ${bestData.journeyPeak})`\n    }\n  }\n\n  // Ultimate fallback\n  console.log(`[Graph] No matching trips, falling back to highest balance`)\n  const sorted = [...trips].sort((a, b) => b.balance - a.balance)\n  return {\n    trip: sorted[0],\n    explanation: \"Fallback: highest balance trip\"\n  }\n}\n\n// =============================================================================\n// JOURNEY-BASED PATH RECOMMENDATION\n// =============================================================================\n\n/**\n * Get recommended path for a rat based on the most profitable journey\n */\nexport async function getRecommendedPath(\n  ratValue: number,\n  _inventory: string[],\n  worldAddress: string,\n  trips: Trip[],\n  maxSteps: number = 5\n): Promise<Array<{ tripId: string; expectedValue: number; cumulativeValue: number }>> {\n  const builder = await initializeGraph(worldAddress, trips)\n  const graph = builder.getGraph()\n\n  // Build set of available trip IDs\n  const availableTripIds = new Set(trips.map(t => t.id))\n\n  // Get journeys sorted by peak value\n  const journeys = [...graph.successfulJourneys].sort((a, b) => b.peakValue - a.peakValue)\n\n  if (journeys.length === 0) {\n    return []\n  }\n\n  // Find the first journey where the first trip is available\n  for (const journey of journeys) {\n    const journeyTripIds = journey.steps.map(s => s.tripId)\n    const firstTripId = journeyTripIds[0]\n\n    if (!availableTripIds.has(firstTripId)) continue\n\n    // Build path from this journey\n    const path: Array<{ tripId: string; expectedValue: number; cumulativeValue: number }> = []\n    let cumulativeValue = ratValue\n\n    for (let i = 0; i < Math.min(maxSteps, journey.steps.length); i++) {\n      const step = journey.steps[i]\n      if (!availableTripIds.has(step.tripId)) break\n\n      cumulativeValue += step.valueChange\n      path.push({\n        tripId: step.tripId,\n        expectedValue: step.valueChange,\n        cumulativeValue\n      })\n    }\n\n    if (path.length > 0) {\n      console.log(`[Graph] Recommended path from ${journey.ratName}'s journey (peak: ${journey.peakValue})`)\n      return path\n    }\n  }\n\n  return []\n}\n\n// Re-export types\nexport * from \"./types\"\n","import Anthropic from \"@anthropic-ai/sdk\"\nimport type { Trip, Rat, Config, TripOutcomeHistory, TripSelectionResult } from \"../../types\"\nimport { selectTripHeuristic, selectTripRandom } from \"./heuristic\"\nimport { selectTripWithClaude } from \"./claude\"\nimport { selectTripHistorical } from \"./historical\"\nimport { selectTripWithGraph } from \"./graph\"\nimport type { GraphStrategyConfig } from \"./graph\"\n\nexport type TripSelector = \"claude\" | \"heuristic\" | \"random\" | \"historical\" | \"graph\"\n\nexport interface SelectTripOptions {\n  config: Config\n  trips: Trip[]\n  rat: Rat\n  ratTotalValue?: number\n  anthropic?: Anthropic\n  outcomeHistory?: TripOutcomeHistory[]\n  worldAddress?: string\n  minRatValueToEnterPercent?: number\n  graphConfig?: Partial<GraphStrategyConfig>\n  currentPath?: string[] // Trip IDs taken this session (for graph strategy)\n  inventory?: string[] // Item names rat currently has (for graph strategy)\n}\n\n/**\n * Select a trip based on the configured strategy\n */\nexport async function selectTrip(options: SelectTripOptions): Promise<TripSelectionResult | null>\n/**\n * @deprecated Use the options object overload instead\n */\nexport async function selectTrip(\n  config: Config,\n  trips: Trip[],\n  rat: Rat,\n  anthropic?: Anthropic,\n  outcomeHistory?: TripOutcomeHistory[],\n  worldAddress?: string\n): Promise<TripSelectionResult | null>\nexport async function selectTrip(\n  configOrOptions: Config | SelectTripOptions,\n  trips?: Trip[],\n  rat?: Rat,\n  anthropic?: Anthropic,\n  outcomeHistory: TripOutcomeHistory[] = [],\n  worldAddress?: string\n): Promise<TripSelectionResult | null> {\n  // Handle both overloads\n  let config: Config\n  let tripsArray: Trip[]\n  let ratObj: Rat\n  let anthropicClient: Anthropic | undefined\n  let history: TripOutcomeHistory[]\n  let worldAddr: string | undefined\n  let ratTotalValue: number | undefined\n  let minRatValueToEnterPercent: number | undefined\n  let graphConfig: Partial<GraphStrategyConfig> | undefined\n  let currentPath: string[] | undefined\n  let inventory: string[] | undefined\n\n  if (\"config\" in configOrOptions) {\n    // Options object overload\n    config = configOrOptions.config\n    tripsArray = configOrOptions.trips\n    ratObj = configOrOptions.rat\n    anthropicClient = configOrOptions.anthropic\n    history = configOrOptions.outcomeHistory ?? []\n    worldAddr = configOrOptions.worldAddress\n    ratTotalValue = configOrOptions.ratTotalValue\n    minRatValueToEnterPercent = configOrOptions.minRatValueToEnterPercent\n    graphConfig = configOrOptions.graphConfig\n    currentPath = configOrOptions.currentPath\n    inventory = configOrOptions.inventory\n  } else {\n    // Legacy positional arguments\n    config = configOrOptions\n    tripsArray = trips!\n    ratObj = rat!\n    anthropicClient = anthropic\n    history = outcomeHistory\n    worldAddr = worldAddress\n  }\n\n  if (tripsArray.length === 0) {\n    return null\n  }\n\n  if (config.tripSelector === \"claude\" && anthropicClient) {\n    console.log(\"Using Claude AI to select trip...\")\n    return selectTripWithClaude(anthropicClient, tripsArray, ratObj, history)\n  } else if (config.tripSelector === \"random\") {\n    console.log(\"Using random selection...\")\n    const trip = selectTripRandom(tripsArray)\n    if (!trip) return null\n    return {\n      trip,\n      explanation: \"Selected trip randomly\"\n    }\n  } else if (config.tripSelector === \"historical\" && worldAddr) {\n    console.log(\"Using historical data from CMS to select trip...\")\n    return selectTripHistorical(tripsArray, worldAddr)\n  } else if (config.tripSelector === \"graph\" && worldAddr) {\n    console.log(\"Using graph-based pathfinding to select trip...\")\n    return selectTripWithGraph({\n      trips: tripsArray,\n      rat: ratObj,\n      ratTotalValue: ratTotalValue ?? ratObj.balance,\n      worldAddress: worldAddr,\n      minRatValueToEnterPercent,\n      config: graphConfig,\n      currentPath,\n      inventory\n    })\n  } else {\n    console.log(\"Using heuristic (highest balance) to select trip...\")\n    const trip = selectTripHeuristic(tripsArray)\n    if (!trip) return null\n    return {\n      trip,\n      explanation: \"Selected trip with highest balance\"\n    }\n  }\n}\n\nexport { selectTripHeuristic, selectTripRandom } from \"./heuristic\"\nexport { selectTripWithClaude } from \"./claude\"\nexport { selectTripHistorical } from \"./historical\"\nexport {\n  selectTripWithGraph,\n  initializeGraph,\n  updateGraphWithOutcome,\n  markTripDepleted,\n  getGraph,\n  addTripToGraph,\n  rebuildGraph,\n  getRecommendedPath\n} from \"./graph\"\nexport type { GraphStrategyConfig, ExtendedOutcome } from \"./graph\"\n","/**\n * Convert an address to padded bytes32 ID format used by MUD\n */\nexport function addressToId(address: string): string {\n  if (!address) return \"0x0\"\n  // remove '0x' prefix, pad the address with leading zeros up to 64 characters, then add '0x' prefix back\n  return \"0x\" + address.slice(2).padStart(64, \"0\").toLowerCase()\n}\n\n/**\n * Sleep for a specified number of milliseconds\n */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n\n/**\n * Retry a function until it returns a truthy result or times out\n */\nexport async function retryUntilResult<T>(\n  fn: () => T | undefined | null,\n  timeoutMs: number = 5000,\n  retryIntervalMs: number = 100,\n  condition?: (result: T | undefined | null) => boolean\n): Promise<T | null> {\n  const startTime = Date.now()\n\n  while (Date.now() - startTime < timeoutMs) {\n    const result = fn()\n\n    const isValid = condition ? condition(result) : Boolean(result)\n\n    if (isValid) {\n      return result as T\n    }\n\n    await sleep(retryIntervalMs)\n  }\n\n  return null\n}\n","// Simple console logger with colors\n\nconst colors = {\n  reset: \"\\x1b[0m\",\n  bright: \"\\x1b[1m\",\n  dim: \"\\x1b[2m\",\n  red: \"\\x1b[31m\",\n  green: \"\\x1b[32m\",\n  yellow: \"\\x1b[33m\",\n  blue: \"\\x1b[34m\",\n  magenta: \"\\x1b[35m\",\n  cyan: \"\\x1b[36m\"\n}\n\nexport function logInfo(message: string) {\n  console.log(`${colors.cyan}[INFO]${colors.reset} ${message}`)\n}\n\nexport function logSuccess(message: string) {\n  console.log(`${colors.green}[SUCCESS]${colors.reset} ${message}`)\n}\n\nexport function logWarning(message: string) {\n  console.log(`${colors.yellow}[WARNING]${colors.reset} ${message}`)\n}\n\nexport function logError(message: string) {\n  console.log(`${colors.red}[ERROR]${colors.reset} ${message}`)\n}\n\nexport function logTrip(tripNumber: number, message: string) {\n  console.log(`${colors.magenta}[TRIP ${tripNumber}]${colors.reset} ${message}`)\n}\n\nexport function logRat(ratName: string, message: string) {\n  console.log(`${colors.blue}[RAT: ${ratName}]${colors.reset} ${message}`)\n}\n\nexport function logDeath(ratName: string, tripCount: number) {\n  console.log(`${colors.red}${colors.bright}`)\n  console.log(`==========================================`)\n  console.log(`  RAT \"${ratName}\" HAS DIED`)\n  console.log(`  Survived ${tripCount} trips`)\n  console.log(`==========================================`)\n  console.log(`${colors.reset}`)\n}\n\nexport function logStats(stats: {\n  ratName: string\n  totalTrips: number\n  startingBalance: number\n  finalBalance: number\n}) {\n  const profitLoss = stats.finalBalance - stats.startingBalance\n  const profitLossColor = profitLoss >= 0 ? colors.green : colors.red\n\n  console.log(`${colors.bright}`)\n  console.log(`==========================================`)\n  console.log(`  RUN STATISTICS`)\n  console.log(`==========================================`)\n  console.log(`${colors.reset}`)\n  console.log(`  Rat Name:        ${stats.ratName}`)\n  console.log(`  Total Trips:     ${stats.totalTrips}`)\n  console.log(`  Starting Balance: ${stats.startingBalance}`)\n  console.log(`  Final Balance:    ${stats.finalBalance}`)\n  console.log(\n    `  ${profitLossColor}Profit/Loss:     ${profitLoss >= 0 ? \"+\" : \"\"}${profitLoss}${colors.reset}`\n  )\n  console.log(``)\n}\n\nexport function logSessionStats(stats: {\n  totalRats: number\n  totalTrips: number\n  totalProfitLoss: number\n}) {\n  const profitLossColor = stats.totalProfitLoss >= 0 ? colors.green : colors.red\n\n  console.log(`${colors.bright}${colors.cyan}`)\n  console.log(`==========================================`)\n  console.log(`  SESSION STATISTICS`)\n  console.log(`==========================================`)\n  console.log(`${colors.reset}`)\n  console.log(`  Total Rats:      ${stats.totalRats}`)\n  console.log(`  Total Trips:     ${stats.totalTrips}`)\n  console.log(\n    `  ${profitLossColor}Total P/L:       ${stats.totalProfitLoss >= 0 ? \"+\" : \"\"}${stats.totalProfitLoss}${colors.reset}`\n  )\n  console.log(``)\n}\n\nexport function logValueBar(options: {\n  currentValue: number\n  liquidateBelowValue?: number\n  liquidateAtValue?: number\n}) {\n  const { currentValue, liquidateBelowValue, liquidateAtValue } = options\n\n  // If neither threshold is set, don't show the bar\n  if (liquidateBelowValue === undefined && liquidateAtValue === undefined) {\n    return\n  }\n\n  const barWidth = 40\n  const minValue = liquidateBelowValue ?? 0\n  const maxValue = liquidateAtValue ?? currentValue * 1.5\n\n  // Calculate position (0 to 1)\n  const range = maxValue - minValue\n  const position = range > 0 ? Math.max(0, Math.min(1, (currentValue - minValue) / range)) : 0.5\n  const filledWidth = Math.round(position * barWidth)\n\n  // Build the bar\n  const filledPart = \"\".repeat(filledWidth)\n  const emptyPart = \"\".repeat(barWidth - filledWidth)\n\n  // Color based on position\n  let barColor: string\n  if (position < 0.2) {\n    barColor = colors.red\n  } else if (position < 0.4) {\n    barColor = colors.yellow\n  } else if (position > 0.9) {\n    barColor = colors.green\n  } else {\n    barColor = colors.cyan\n  }\n\n  // Build labels\n  const leftLabel = liquidateBelowValue !== undefined ? `${liquidateBelowValue}` : \"0\"\n  const rightLabel = liquidateAtValue !== undefined ? `${liquidateAtValue}` : \"\"\n\n  console.log(\n    `${colors.dim}[VALUE]${colors.reset} ${leftLabel} ${barColor}${filledPart}${colors.dim}${emptyPart}${colors.reset} ${rightLabel} (${currentValue})`\n  )\n}\n","import { readFileSync, writeFileSync, existsSync } from \"fs\"\nimport type { TripOutcomeHistory } from \"../../types\"\n\nconst HISTORY_FILE = \"outcome-history.json\"\n\n/**\n * Load outcome history from JSON file\n */\nexport function loadOutcomeHistory(): TripOutcomeHistory[] {\n  try {\n    if (existsSync(HISTORY_FILE)) {\n      const data = readFileSync(HISTORY_FILE, \"utf-8\")\n      const history = JSON.parse(data) as TripOutcomeHistory[]\n      console.log(`Loaded ${history.length} previous outcomes from ${HISTORY_FILE}`)\n      return history\n    }\n  } catch (error) {\n    console.warn(\n      `Failed to load outcome history: ${error instanceof Error ? error.message : error}`\n    )\n  }\n  return []\n}\n\n/**\n * Save outcome history to JSON file\n */\nexport function saveOutcomeHistory(history: TripOutcomeHistory[]): void {\n  try {\n    writeFileSync(HISTORY_FILE, JSON.stringify(history, null, 2))\n  } catch (error) {\n    console.warn(\n      `Failed to save outcome history: ${error instanceof Error ? error.message : error}`\n    )\n  }\n}\n","import type { Hex } from \"viem\"\nimport type { Config } from \"./types\"\n\nexport function getServerUrl(chainId: number): string {\n  switch (chainId) {\n    case 8453:\n      return \"https://base.rat-fun-server.com\"\n    case 84532:\n      return \"https://base-sepolia.rat-fun-server.com\"\n    default:\n      return \"http://localhost:3131\"\n  }\n}\n\nexport function loadConfig(opts: {\n  chain?: string\n  selector?: string\n  autoRespawn?: boolean\n  name?: string\n  liquidateAt?: string\n  liquidateBelow?: string\n}): Config {\n  const chainId = Number(opts.chain || process.env.CHAIN_ID || \"84532\")\n\n  let privateKey = process.env.PRIVATE_KEY\n  if (!privateKey) {\n    throw new Error(\"PRIVATE_KEY environment variable is required\")\n  }\n\n  // Ensure private key has 0x prefix\n  if (!privateKey.startsWith(\"0x\")) {\n    privateKey = `0x${privateKey}`\n  }\n\n  // Validate private key format (should be 0x + 64 hex chars)\n  if (!/^0x[0-9a-fA-F]{64}$/.test(privateKey)) {\n    throw new Error(\n      \"Invalid PRIVATE_KEY format. Expected 32 bytes hex string (64 hex chars, optionally prefixed with 0x)\"\n    )\n  }\n\n  const anthropicApiKey = process.env.ANTHROPIC_API_KEY\n  if (!anthropicApiKey) {\n    throw new Error(\"ANTHROPIC_API_KEY environment variable is required\")\n  }\n\n  // Parse liquidation thresholds\n  const liquidateAtEnv = process.env.LIQUIDATE_AT_VALUE\n  const liquidateAtOpt = opts.liquidateAt\n  const liquidateAtValue = liquidateAtOpt\n    ? Number(liquidateAtOpt)\n    : liquidateAtEnv\n      ? Number(liquidateAtEnv)\n      : undefined\n\n  const liquidateBelowEnv = process.env.LIQUIDATE_BELOW_VALUE\n  const liquidateBelowOpt = opts.liquidateBelow\n  const liquidateBelowValue = liquidateBelowOpt\n    ? Number(liquidateBelowOpt)\n    : liquidateBelowEnv\n      ? Number(liquidateBelowEnv)\n      : undefined\n\n  return {\n    privateKey: privateKey as Hex,\n    anthropicApiKey,\n    chainId,\n    serverUrl: process.env.SERVER_URL || getServerUrl(chainId),\n    tripSelector: (opts.selector || process.env.TRIP_SELECTOR || \"claude\") as\n      | \"claude\"\n      | \"heuristic\"\n      | \"random\"\n      | \"historical\"\n      | \"graph\",\n    autoRespawn: opts.autoRespawn ?? process.env.AUTO_RESPAWN === \"true\",\n    ratName: opts.name || process.env.RAT_NAME || \"RattusBot\",\n    worldAddress: process.env.WORLD_ADDRESS,\n    rpcHttpUrl: process.env.RPC_HTTP_URL,\n    liquidateAtValue,\n    liquidateBelowValue\n  }\n}\n"],"mappings":"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","names":["ENTITY_TYPE","getComponentValue","singletonEntity","ENTITY_TYPE","sorted"]}